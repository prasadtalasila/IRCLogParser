notifications:
  email:
    recipients:
      - kaushikrohit325@gmail.com
      - rohangoel0296@gmail.com
      - tsrkp@goa.bits-pilani.ac.in 
    on_success: change
    on_failure: always

language: python
python:
  - "2.7"

# command to install dependencies
install:
  - pip install -U pip wheel
  - pip install sphinx
  - pip install 'coverage>=4.0,<4.4'
  - pip install codeclimate-test-reporter
  - python setup.py install
  - python -m nltk.downloader wordnet

script:
  - coverage run --source=. -m unittest discover -s test/
  - bash ext/doc_auto_deploy.sh

after_success:
  - coverage report -m
  - codeclimate-test-reporter --file .coverage --token $CODECLIMATE_REPO_TOKEN
  - cd test
  #- mprof clean && mprof run python -m unittest -v tests && cd ../profiler && python memory_profiler.py && echo "FOR UPDATED MEMORY CONSUMPTION, see image:" && curl -F "clbin=@memory_consumption.png" https://clbin.com
  #- sfood ../lib/analysis ../lib/analysis/* ../ext ../lib/in_out/* ../lib/config.py ../lib/nickTracker.py ../lib/util.py ../lib/vis.py ../sample.py | sfood-graph | dot -Tpng -Gsize=9,15\! -Gdpi=300 -o call-graph-dependency.png && echo "FOR UPDATED DEPENDENCY, see image:" && curl -F "clbin=@call-graph-dependency.png" https://clbin.com
