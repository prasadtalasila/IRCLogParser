=== dayangkun_ is now known as dayangkun
=== glebihan_ is now known as glebihan
[01:46] <uvirtbot`> New bug: #1096491 in etckeeper (main) ""etckeeper unclean" is broken" [Undecided,New] https://launchpad.net/bugs/1096491
=== cpg|away is now known as cpg
=== cpg is now known as cpg|away
[02:11] <uvirtbot`> New bug: #1096495 in etckeeper (main) "manpage talks about /etc/.metadata" [Undecided,New] https://launchpad.net/bugs/1096495
=== cpg|away is now known as cpg
=== sw0rdfish- is now known as sw0rdfish
[03:01] <uvirtbot`> New bug: #1096505 in etckeeper (main) "manpage fails to document "etckeeper init" for restauration of file permissions and ownership" [Undecided,New] https://launchpad.net/bugs/1096505
[03:32] <mand0> anybody get a Active Directory Samba4 server running?
[03:48] <qman__> not yet
[03:48] <qman__> I plan to soon though
[03:48] <qman__> I tried to join one to an existing AD and it wouldn't work, apparently some issue with a 2003 AD and exchange 2007
=== hack is now known as megha
[05:27] <mand0> i tried to join an existing one just now (in a test lab) and I am getting this same error: http://www.mail-archive.com/debian-bugs-dist@lists.debian.org/msg1088003.html
[05:30] <samba35> i have installed window 7 on ubuntu12.04 but last stage of windows did not finesh and machine goes in reboot phase ,how do repair this or ,is there a way to repair windows
=== cpg is now known as cpg|away
[05:44] <arrrghhh> Hey all.  I am migrating to a new server, and I want to setup LVM.  I can only do this on new, unpartitioned disks correct?
[05:45] <arrrghhh> I can't "add" LVM to old hard disks that already have data/are formatted...?
[05:58] <arrrghhh> anyone around?  curious if the ubuntu server installer changes the flags of all my disks to 'lvm'... if I can change them back to 'ext4' and the data still be intact?
[05:58] <arrrghhh> to my knowledge no mkfs commands were passed....
[06:57] <arrrghhh> so can I migrate an ext4 disk to LVM without losing data...?
[06:58] <arrrghhh> I haven't formatted any disks, so I honestly hope not...
=== cpg|away is now known as cpg
[09:19] <zapotah> Hi. Is there yet a way to install an efi system to mdraid to be bootable from both disks.
[10:53] <samba35> i have installed windows on linux with kvm ,i want to access windows machine over internet for that what i should do i have  utm (firewall/vpn/routeing /av/spam/proxy) from utm i plan to use nat
=== cpg is now known as cpg|away
[14:52] <TheLordOfTime> SpamapS, see privmsg.  or -motu
[14:55] <TheLordOfTime> or both :p
[15:15] <bcbrown19> Anyone know a good guide for setting resolutions with Ubuntu Server 12.10 (on a virtual machine)? I tried changing some things in /etc/default/grub, but to no avail
[15:18] <Ubiquity4321> hello everyone
[15:18] <Ubiquity4321> I'm trying to set up a headless samba
[15:18] <Ubiquity4321> server
[15:18] <Ubiquity4321> i've got everything installed
[15:19] <Ubiquity4321> and i've auto mounted disks and everything
[15:19] <Ubiquity4321> but I can't seem to figure out the headless part
[15:20] <RoyK> erm - what is it you don't understand about headless?
[15:20] <Ubiquity4321> well, i've configured ssh
[15:20] <Ubiquity4321> i've got xming installed on my windows box
[15:20] <Ubiquity4321> I can't figure out how to connect the two
[15:21] <Ubiquity4321> i've done googled my heart out at this point
[15:21] <RoyK> just launch putty and enable x11 forwarding
[15:21] <RoyK> or are you trying to get the whole linux desktop on windows?
[15:22] <RoyK> that's not a server thing, though
[15:22] <Ubiquity4321> no, it's 100% cli
[15:22]  * RoyK looks at the channel name
[15:22] <Ubiquity4321> RoyK: let me see if I can figure that out
[15:22]  * Ubiquity4321 looks at his 12.04 server install
[15:23] <Ubiquity4321> that was the simplist explanation i've come across tbh RoyK
=== A is now known as Guest1600
[15:39] <arrrghhh> Hello all.  I committed some sin last night, and I'm hoping it's resversible...
[15:39] <arrrghhh> I was messing around with LVM while installing Ubuntu last night, and I converted existing ext4 disks to LVM.  I didn't run mkfs so the drives should still have all the data... can I convert them back to ext4, or somehow otherwise get the data off the drivers?
[15:49] <RoyK> arrrghhh: what did you do? pvcreate?
[15:50] <arrrghhh> RoyK, unfortunately it was done by the ubuntu installer... so i'm not sure exactly.
[15:50] <RoyK> so, is the partition table the same?
[15:50] <arrrghhh> should be
[15:50] <arrrghhh> I tried changing the flags in fdisk, to no avail
[15:50] <RoyK> and was /home on a separate partition?
[15:51] <RoyK> fsck might help
[15:51] <arrrghhh> /home doesn't really matter, it's the data disks
[15:51] <RoyK> check what flags are available there
[15:51] <arrrghhh> cool
[15:51] <arrrghhh> just fsck /dev/sddX?
[15:52] <arrrghhh> Hrm... I might have to do this from a liveCD
[15:52] <RoyK> you probably should
[15:52] <RoyK> erm
[15:52] <arrrghhh> alrighty rebooting
[15:52] <RoyK> have you reinstalled?
[15:53] <arrrghhh> Yes, I finished the install last night... but I didn't install on the LVM drive
[15:53] <RoyK> if the filesystem is recreated, then all you have of choice is a restore
[15:53] <arrrghhh> or any of the LVM drives
[15:53] <RoyK> did you have separate ext4 filesystems on all of them?
[15:53] <arrrghhh> yes
[15:53] <arrrghhh> they were all flat ext4 drives before I did the stupid deed last night
[15:54] <RoyK> do you have a backup?
[15:54] <arrrghhh> Off-site, but yes
[15:54] <arrrghhh> I'd obviously rather avoid that if I can, but there is backups of pretty much everything.... even /etc
[15:56] <RoyK> arrrghhh: btw, there's no point of doing this from a live cd if the filesystems aren't in use
[15:57] <arrrghhh> oh ok cool
[15:57] <arrrghhh> when I sudo fdisk -l the disks no longer show as /dev/sdX, they show as /dev/mapper/OldOS-OldOS for example
[15:58] <RoyK> sorry - don't know that
[15:58] <RoyK> arrrghhh: what does cat /proc/partitions have to say?
[15:58] <arrrghhh> Hrm... I'm not sure how to fsck this
[15:58] <arrrghhh> lets see
[15:58] <arrrghhh> hey, those look familiar
[15:59]  * RoyK doesn't know his way around the device mapper
[15:59] <arrrghhh> hehe.  I appreciate your help :)
[15:59] <arrrghhh> If I can revive without going to backups it will save a LOT of time.
[15:59] <RoyK> how many drives?
[16:00] <arrrghhh> uhm... let me pastebin the output
[16:00] <arrrghhh> http://pastebin.com/WdTGpFAu
[16:01] <arrrghhh> 6 disks.  1 of those (sdg) is a flash drive I used to install Ubuntu
[16:02] <RoyK> arrrghhh: I'd use a RAID for such amount of drives if I were you
[16:03] <arrrghhh> RoyK, they're all different sizes
[16:03] <RoyK> but then, looks like they're of different sizes
[16:03] <arrrghhh> well, except for two
[16:03] <arrrghhh> :)
[16:03] <RoyK> 'cept sdb and sdc
[16:03] <arrrghhh> I'm going to do 4tb drives and RAID5 eventually
[16:03] <RoyK> better start with smaller ones - more bang for the buck
[16:03] <arrrghhh> But... the first 4tb has yet to arrive :)
[16:03] <RoyK> you can always add more drives to the raid later
[16:03] <arrrghhh> Yea, but they have to be the same size...
[16:04] <RoyK> yes, so start out with 2TB drives
[16:04] <RoyK> or 3TB
[16:04] <RoyK> 4TB are expensive
[16:04] <arrrghhh> I couldn't find any WD caviar black's in 3tb
[16:04] <arrrghhh> and 2tb... I guess I could've
[16:04] <arrrghhh> but that's neither here nor there
[16:04] <RoyK> I have a few 2TB WD drives
[16:04] <RoyK> and a few Hitachis
=== Guest1600 is now known as w0rmie
[16:05] <arrrghhh> Some of these drives are going away my friend
[16:05] <arrrghhh> But unfortnately they cannot today
[16:05] <RoyK> arrrghhh: http://paste.ubuntu.com/1503573/
[16:05] <arrrghhh> RAID6 eh?  fancy :)
[16:06] <RoyK> arrrghhh: also, if you replace all drives in a raid with larger drives, the raid will grow :)
[16:06] <RoyK> just don't use partitions
[16:06] <arrrghhh> Hahaha
[16:06] <RoyK> raid6 == paranoia == safe
[16:06] <arrrghhh> indeed
[16:06] <arrrghhh> survive a double drive failure
[16:06] <arrrghhh> RoyK, I'm working my way towards RAID....
[16:06] <RoyK> I find it comforting to know my data is safe ;)
[16:07] <arrrghhh> I wanted to learn about LVM, and like an idiot I added all my drives to it last night
[16:07] <RoyK> raid-5 works too, though
[16:07] <arrrghhh> when I realized it had done that, I tried to undo it and seemingly could not...
[16:07] <RoyK> arrrghhh: I'm afraid it might be hard to rollback on that
[16:07]  * RoyK blames saturday nights beers
[16:08] <arrrghhh> oy
[16:08] <arrrghhh> I rushed into the install a bit.  I was tired and excited... stupid.
[16:08] <RoyK> anyway - if you can afford 3-4 2TB WD Red drives, that should be rather good for a home raid
[16:09] <arrrghhh> Yea, I'll get there :)
[16:09] <arrrghhh> I just put a mobo in that can handle more disks
[16:09] <arrrghhh> and RAM
[16:09] <arrrghhh> Wanted to rebuilt my 32-bit server 64-bit
[16:09] <RoyK> why not just a 2port SATA controller?
[16:09] <RoyK> or two
[16:09] <arrrghhh> old mobo only had 2 RAM slots
[16:10]  * arrrghhh wanted moar speed
[16:10] <RoyK> well, for a home server, how much do you need?
[16:10] <arrrghhh> lol
[16:10] <RoyK> it won't be much faster with more RAM, unless you have very little
[16:10] <arrrghhh> my indexer site...
[16:10] <arrrghhh> it had built a pretty big freakin db
[16:10] <RoyK> ah
[16:10] <arrrghhh> I haven't really spent anything on this server since I built it in 2008
[16:11] <arrrghhh> and I went really cheap on it then :)
[16:11] <arrrghhh> So the server had done a great job until I started this stupid indexer...
[16:11] <RoyK> I bought some 2-port controllers off ebay
[16:11] <RoyK> works like a dream ;)
[16:11] <arrrghhh> how's the speed?
[16:12] <RoyK> arrrghhh: about the same as my pci-e v1 can deliver
[16:12] <arrrghhh> Tryin to think of the expansion slots left on that oldboard too
[16:12] <arrrghhh> meh
[16:12] <RoyK> the speed is only limited by the spinning rust
[16:12] <arrrghhh> So... you don't think I should even try fsck?
[16:12] <RoyK> two drives on a single pci-e v1 lane is ok
[16:13] <RoyK> well, you can, but I don't know if it's worth the time and the headache, if you have a backup
[16:13] <RoyK> also, if you reconfigure this system, stick to single drives for now, not lvm
[16:13] <arrrghhh> well.... I'm looking at this here...
[16:13] <RoyK> since if one of the drives die, it may take down the whole lvm volume
[16:14] <arrrghhh> oh
[16:14] <arrrghhh> I didn't realize LVM was bad like that... eek
[16:14] <RoyK> no, it's not bad at all
[16:14] <arrrghhh> I guess I need to wait for RAID before I LVM...
[16:14] <RoyK> but it requires the underlying devices to work
[16:14] <RoyK> I use LVM on top of RAID-6
[16:14] <RoyK> so that I create a volume for each purpose
[16:15] <arrrghhh> Yea.  I was planning on using LVM for that...
[16:15] <arrrghhh> but before I took the RAID jump
[16:15] <RoyK> that's rather flexible
[16:15] <RoyK> and then the MD code can take care of the redundancy
[16:15] <RoyK> I lost a drive just after christmas
[16:15] <RoyK> no problem, not even a reboot, the spare took over, rebuilt in a day or so
[16:16] <RoyK> if that had been a concatenated LVM, all my data would have been lost and I'd have to restore from backup (on crashplan, and that's *slow*)
[16:17] <arrrghhh> RoyK, which is what I am restoring from
[16:17] <arrrghhh> and I'm trying to avoid...
[16:17] <RoyK> hehe
[16:17] <RoyK> how much data?
[16:17] <arrrghhh> you really want to know?
=== hack is now known as Guest17317
[16:17] <TheLordOfTime> I think he does.
[16:17] <RoyK> arrrghhh: it may be faster from where you are - I'm in .no
[16:18] <arrrghhh> 2.4tb
[16:18] <RoyK> ok
[16:18] <RoyK> give it a month ;)
[16:18] <arrrghhh> yup
[16:18] <RoyK> I can understand why you want to try to fix this...
[16:18] <arrrghhh> fsck
[16:18] <arrrghhh> I had to do every single drive too... lol
[16:18] <RoyK> fsck -N
[16:19] <RoyK> is a good start
[16:19] <arrrghhh> when i fsck myself, I do it gooood.
[16:19] <arrrghhh> hrm OK
[16:19] <RoyK> or start with one of the smaller drives for testing
[16:19] <arrrghhh> ok
[16:19] <RoyK> arrrghhh: /dev/mapper/raid-ymse    6.3T  4.2T  2.1T  67% /raid
[16:20] <arrrghhh> :)
[16:20] <RoyK> most of that's on crashplan - I hope I don't have to restore from there...
[16:20] <arrrghhh> lol
[16:21] <arrrghhh> So I can't seem to fsck -N /dev/sdf... and if I do sdf1 it says "fsck.LVM2_member: not found"
[16:21] <RoyK> fsck.ext4
[16:22] <RoyK> or 'fsck -t ext4', which is the same thing, only portable
[16:22] <RoyK> btw, what does lvscan have to say?
[16:22] <arrrghhh> ok, what should I pass?
[16:22] <arrrghhh> lvscan lets see
[16:23] <RoyK> or pvscan
[16:23] <RoyK> pastebin those and lvscan
[16:23] <arrrghhh> http://pastebin.com/jUj5Dttc
[16:24] <arrrghhh> the only "healthy" one is VG OS...
[16:25] <RoyK> I guess starting with lvremove/pvremove on one of those, perhaps oldos?, might be worth a try
[16:25] <RoyK> the tv shows and the movies are perhaps downloaded?
[16:26] <RoyK> you can't do anything until the partitions aren't in use
[16:26] <RoyK> they are now
[16:26] <RoyK> so perhaps better use a live cd, but then, that might start lvm as well
[16:26] <RoyK> so, if you can afford to lose one of those, like oldos, test with that first
[16:26] <arrrghhh> ok
[16:27] <arrrghhh> backup would ironically be the one to test with since its the smallest
[16:27] <arrrghhh> so rebooting to livecd...
[16:28] <RoyK> yeah, try that, if lvscan shows the volumes active after bootup, well, it's the same thing
=== Guest17317 is now known as hack
[16:29] <arrrghhh> I'll probably have to install lvm2 on the livece
[16:29] <arrrghhh> cd*
[16:29] <RoyK> don't
[16:29] <RoyK> just don't
[16:29] <arrrghhh> que?  livecd won't have it
[16:29] <RoyK> try to fsck that device
[16:30] <arrrghhh> ubuntu desktop doesn't support lvm
[16:30] <arrrghhh> oh
[16:30] <arrrghhh> ok
[16:30] <RoyK> never mind
[16:30] <RoyK> you didn't use it on the old install
[16:30] <RoyK> so you don't need it
[16:30] <RoyK> ubuntu desktop supports lvm, but you don't want it for this
[16:30] <arrrghhh> ok
[16:31] <RoyK> just try to fsck -t ext4 -N /dev/sdf1
[16:32] <RoyK> -N is "don't do anything"
[16:32] <RoyK> just to see if it can find the filesystem
[16:32] <arrrghhh> fsck.ext4: No such file or directory while trying to open ext4
[16:33] <arrrghhh> hrm..
[16:33] <arrrghhh> 1 sec
[16:38] <arrrghhh> RoyK, ok... i got it to run on the live environment
[16:38] <RoyK> did it find the filesystem?
[16:38] <arrrghhh> but copy/paste is now difficult heh.  it says the superblock could not be read
[16:38] <arrrghhh> "or does not describe a correct ext2"
[16:39] <arrrghhh> it says I should run e2fsck with an alternate superblock
[16:39] <arrrghhh> "e2fsck -b 8193 <device>"
[16:39] <RoyK> try that with -N
[16:39] <arrrghhh> ok
[16:39] <RoyK> so that it doesn't do anything
[16:40] <arrrghhh> hrm
[16:40] <arrrghhh> it says bad magic number in superblock while trying to open /dev/sdf1
[16:40] <arrrghhh> then the exact same message about running e2fsck -b 8193 <device>
[16:40] <arrrghhh> I guess I just run it on one of the drives and hope... I have a complete backup of this drive
[16:41] <arrrghhh> and it's the smallest drive haha
[16:41] <RoyK> http://linuxexpresso.wordpress.com/2010/03/31/repair-a-broken-ext4-superblock-in-ubuntu/
[16:41] <RoyK> the superblock is located several places, but you need to know where to find it ;)
[16:41] <arrrghhh> hrm
[16:41] <arrrghhh> interesting
[16:42] <RoyK> I didn't know the trick with fsck -n :)
[16:42] <RoyK> s/fsck/mke2fs/
[16:43] <arrrghhh> o wow
[16:43] <arrrghhh> it's doing stuffs
[16:44] <arrrghhh> this might actually work.  thank you so much RoyK :)
[16:44] <RoyK> you'll have to re-run it without -N
[16:44] <arrrghhh> yup, I am now...
[16:44] <arrrghhh> well
[16:44] <arrrghhh> the e2fsck -b command
[16:45] <RoyK> it should rewrite the original superblock
[16:45] <F3Speech> Having a problem with my cifs network shares after extetended idle on server, is there any way to tell the server not to sleep/suspend etc. so when services go to access the shares they are always there. Thanks
[16:45] <RoyK> if that works, try to mount the filesystem
[16:46] <RoyK> if that works, do the same for other filesystems and order a good champagne for me ;)
[16:46] <patdk-lap> if it doesn't work, order a hit on royk
[16:46] <arrrghhh> it's asking me to fix a ton of crap
[16:46] <RoyK> that's normal
[16:47] <RoyK> you've messed up ;)
[16:47] <arrrghhh> hrm
[16:47] <arrrghhh> ok, it's done
[16:47] <arrrghhh> fdisk -l still shows the filesystem type as lvm?
[16:47] <RoyK> try to mount it anyway
[16:47] <arrrghhh> ok
[16:48] <RoyK> patdk-lap: heh
[16:48] <arrrghhh> yay!
[16:48] <arrrghhh> i had to force it
[16:48] <arrrghhh> -t ext4
[16:48] <RoyK> :)
[16:49] <arrrghhh> force the mount that is.
[16:49] <arrrghhh> RoyK, mind if I PM you?
[16:49] <RoyK> fdisk -l will probably remember what was set on boot
[16:49] <RoyK> arrrghhh: not at all
[16:52] <RoyK> arrrghhh: btw, try to reboot now, still on the live cd, and check what fdisk -l says
[16:52] <RoyK> F3Speech: a server installation should never suspend
[16:56] <arrrghhh> RoyK, so I rebooted and fdisk -l still shows it as lvm?
[16:56] <RoyK> what is the partition type?
[16:56] <arrrghhh> 8e
[16:56] <arrrghhh> Linux LVM
[16:56] <RoyK> change it
[16:56] <arrrghhh> to 83?
[16:56] <RoyK> mhm
[16:56] <arrrghhh> k
[16:58] <arrrghhh> reboot again?  I tried to just do a straight 'mount' after writing that change in fdisk, and it still thinks it is lvm until I -t ext4.... fdisk -l just shows the type as "Linux"
[16:59] <arrrghhh> The installer showed disk types as ext4, but maybe it wasn't just showing fdisk output...
[16:59] <arrrghhh> well, it showed them as ext4 before I screwed them all up lol
[17:00] <RoyK> I don§t think it'll change until a reboot
[17:00] <arrrghhh> ok
[17:00] <samba35> after mounting iscsi file (not disk) on linux how do i add /copy  (or create a file )file to that image (in the image )
[17:00] <samba35> RoyK, hi
[17:01] <RoyK> ho
[17:02] <arrrghhh> RoyK, hrm... well without specifying the filesystem type it doesn't mount
[17:02] <arrrghhh> but I don't think that really freakin matters at this point.  so long as fstab can mount it, I will be golden.
[17:03] <RoyK> arrrghhh: then I suggest you move data around, recreate filesystems etc, and nothing should be lost
[17:03] <arrrghhh> kk
[17:03] <arrrghhh> 4tb hdd is going to be here tomorrow :)
[17:03] <RoyK> arrrghhh: what does pvscan/lvscan say now?
[17:04] <arrrghhh> hrm... I'd have to boot back to the server install
[17:04] <RoyK> arrrghhh: then use that for backup storage, and get a small amount of 2TB WD Red drives for a RAID
[17:04] <RoyK> arrrghhh: you can apt-get install lvm
[17:04] <RoyK> even on a live cd
[17:04] <arrrghhh> eh I guess
[17:05] <arrrghhh> so
[17:06] <arrrghhh> It says /dev/sdf1 is still a physical volume
[17:06] <arrrghhh> Do I need to "remove" these disks from LVM before doing this?
[17:07] <RoyK> guess so
[17:07] <RoyK> never tried this type of recovery
[17:07] <RoyK> do you have room on any of those 1TB drives for the backup data_
[17:07] <RoyK> ?
[17:08] <arrrghhh> nope
[17:08] <arrrghhh> hence why the 4tb is on the way :)
[17:08] <RoyK> well, try pvremove, then
[17:09] <RoyK> probably have to lvremove first
[17:09] <arrrghhh> yay
[17:09] <RoyK> then pvremove
[17:09] <arrrghhh> mount works
[17:09] <RoyK> then fsck again
[17:09] <arrrghhh> on the sdf1 dis
[17:09] <RoyK> fsck!
[17:09] <arrrghhh> I will have to now fsck all the other disks
[17:09] <arrrghhh> oh?
[17:09] <RoyK> lvremove/pvremove probably changed something
[17:09] <RoyK> so better fsck -f
[17:10] <arrrghhh> clean
[17:10] <RoyK> good
[17:10] <RoyK> then pvremove the others
[17:10] <demona> Network booting from my PXE server stopped working. I changed nothing, didn't even reboot. (UNtil now, to try fixing it.) Two copies of dhclient running (one is for an LXC container). dnsmasq now refuses to start saying the local IP address is already in use. Google is not helpful. Any ideas?
[17:10] <RoyK> and fsck as last time
[17:10] <arrrghhh> sweet.
[17:10] <arrrghhh> now to do the rest of the disks
[17:10] <arrrghhh> I should be able to boot back to the server install now right?
[17:11] <RoyK> yse
[17:11] <RoyK> yes
[17:11] <arrrghhh> cool.  fstab is empty on this install so it won't try to mount 'em
[17:11] <RoyK> lvm will scan for them
[17:11] <RoyK> so remove them from lvm first
[17:12] <zapotah> Hi. Is there yet a good way of installing ubuntu on mdraid on efi so that it is boot redundant as well?
[17:13] <RoyK> zapotah: no idea, but the general setup is to install grub on both devices, so it should work
[17:13] <patdk-lap> it all depends on your bios
[17:13] <zapotah> RoyK: thats how it worked in the olden days with bios, but not with efi
[17:13] <zapotah> im talking about pure efi
[17:14] <RoyK> zapotah: sorry, don't know
[17:14] <zapotah> the server system has no compat module whatsoever
[17:14] <zapotah> info on this seems to hidden behind lock and key and buried in the deepest depths of the ocean
[17:14] <zapotah> to be*
[17:17] <zapotah> and not just on ubuntu but on linux in general
[17:17] <zapotah> and im quite baffled by the lack of information since efi is not _that_ new of a thing in computing
[17:18] <arrrghhh> RoyK, thanks again for helping out with the lvm issue.  pvremove did the trick, now I just need to do the superblock trick on all my other drives...
[17:18] <RoyK> arrrghhh: just don't create lvm on existing devices next time ;)
[17:18] <arrrghhh> hahaha
[17:18] <arrrghhh> I think I've learned my lesson thar
[17:18] <patdk-lap> zapotah, no wonder your confusing me
[17:19] <patdk-lap> it's uefi
[17:19] <arrrghhh> I'm going to wait for RAID before I venture into LVM on multiple disks...
[17:19] <RoyK> arrrghhh: just setup md (raid) on a bunch of drives, use lvm on top of that, and you'll be all set
[17:19] <patdk-lap> and it is pretty new, people have only been playing with it in linux for about a year
[17:19] <arrrghhh> RoyK, will do :)
[17:20] <RoyK> arrrghhh: make sure it's raid-5 or perhaps -6 - redundancy is good
[17:20] <arrrghhh> I was thinking 5, 6 sounded kinda complicated
[17:20] <arrrghhh> But I like the ability to lose 2 disks...
[17:21] <arrrghhh> eh
[17:21] <arrrghhh> Assuming I'm on top of it, 5 should be enough lol
[17:21] <RoyK> arrrghhh: you can start off with raid-5 and change to raid-6 later if you get a lot of drives
[17:21] <arrrghhh> cool
[17:22] <RoyK> mdadm  --change --level=6 --add /dev/sdX (iirc)
[17:22] <RoyK> perhaps add --raid-devices=x
[17:22] <zapotah> patdk-lap: it will sooner or later propably be doable more or less the same way it is done now so that the mdraid device itself maps the uuid pointers for the efi boot program from the device uuids and makes it bootable
[17:22] <zapotah> or some such way
[17:23] <zapotah> and grub is updated along
[17:23] <zapotah> to support such a thing
[17:23] <arrrghhh> uefi is sweet.  I updated from the internet within the "BIOS" screen.
[17:23] <patdk-lap> everything is possible given time, but it's still too new
[17:23] <patdk-lap> and uefi systems only started coming out a little while ago
[17:24] <patdk-lap> I don't think any of the systems I bought last year are even uefi compatable
[17:24] <zapotah> arrrghhh: uefi is full of opportunity but currently support and software implementations are limited to say the least...
[17:24] <RoyK> patdk-lap: erm, most servers we got last year had uefi
[17:25] <zapotah> RoyK: patdk-lap: every server bought last year were uefi
[17:25] <patdk-lap> I didn't buy any servers last year
[17:25] <patdk-lap> just about 15 workstations
[17:25] <patdk-lap> I am buying several new servers next month
[17:26]  * RoyK points patdk-lap to the channel name
[17:26] <zapotah> and theres this weird ibm server thing that does not for some reason have a compat module...
[17:26] <patdk-lap> royk, I can easily run ubuntu-server on a desktop system :)
[17:26] <zapotah> ibm ofc wants to sell a raid card ;)
[17:27] <RoyK> zapotah: yeah, let's put a small ARM system with limited memory bandwith into a badass server to do the I/O
[17:28] <zapotah> RoyK: exactly and it costs a ridiculous amount of money as well -.-
[17:28] <RoyK> yep
[17:29] <zapotah> though seeing theres not much choice when comparing the risk of something going fubar with making a custom solution for this I just might go with it all the same...
[17:30] <zapotah> definately not happy with it...
[17:32] <zapotah> i wonder if windows can manage it either just yet... time to fire up that esxi efi platform and test for the hell of it ->
[17:33] <demona> Screw it. Moved PXE server to another machine. Working now. The Microsoft Solution.
[17:39] <qman__> zapotah, I just went through a similar adventure in EFI just trying to get ubuntu server installed in the first place
[17:40] <qman__> and in my case I was simply trying to get it to detect the cd or make the networking work so it could install
[17:40] <zapotah> qman__: getting it installed with just the efi partition not raid backed was easy enough
[17:40] <zapotah> but then the problem hit me
[17:41] <qman__> I never did get netboot working, but I managed to make the CD work by manually setting the USB CDROM type to CDROM emulation
[17:41] <qman__> mine boots normal grub on MBR disks just fine
[17:42] <qman__> the point of course being, documentation is virtually nonexistant, and the consensus is "don't use it if you can avoid it"
[17:42] <qman__> at least with everything I have been able to find
[17:43] <zapotah> basically it would be easy if grub installed on both the partitions just made some guid mappings and somehow the partition to be mounted would be fed from grub instead of fstab of whatnot
[17:43] <zapotah> though i realize how that would be a suboptimal solution
[17:44] <zapotah> and the uefi firmware could boot either of the disks it sees
[17:44] <zapotah> and it would result in the system being loaded
[17:45] <zapotah> that would be a non-raid and more like a dual partition solution as in reference to a sub-optimal solution
[17:46] <zapotah> there would then need to be a mechanism to be aware of both the partitions and update things to both accordingly if needed
[17:46] <zapotah> again in my mind, sub-optimal
[17:46] <qman__> well, the thing is
[17:46] <qman__> you can use a raid 1 and read them like normal partitions through the boot stage
[17:47] <qman__> that's how grub did it before it got smart enough to actually read more stuff
[17:47] <qman__> that said I don't know how EFI booting actually works
[17:48] <zapotah> qman__: I dont understand it too well either. Thats why Im sort of shooting in the dark :)
[17:48] <qman__> mine's got everything in BIOS compatibility
[17:49] <zapotah> qman__: I wish this thing had that option as well.
[17:50] <zapotah> one of the more cool features of uefi is that you can load all kinds of uefi programs into the firmware as modules (with limitations this time in flash rom size) without the damn 128kb orom limitation
[17:51]  * zapotah has dabbled with bios modification and hates this limitation
[17:54] <stemid> http://pastebin.com/WQkebVbA can anyone say why this kickstart partitioning won't work? whenever it gets to that stage I am presented with the default partitioning scheme confirmation. also does 12.04 have kickstart support for logvol yet? I haven't gotten that far but I thought I'd ask since I couldn't find a definitive answer online.
[17:55] <qman__> yeah, it seems like a good system, but it has to actually work first, and we're not there yet
[17:55] <stemid> fyi the default partitioning scheme does not have a /boot partition.
[17:58] <stemid> and I noticed the mistake I made in the volgroup line with the pv name.
[17:59] <stemid> but I haven't gotten that far yet anyways.
[18:04] <zapotah> stemid: the documentation on logvol in kickstart is old at best but many features are not supported apparently
[18:09] <stemid> yes I've seen mentions that logvol specifically is not supported but couldn't be sure if it was for 12 or an earlier version
[18:10] <stemid> but regardless, seems like part has problems too. https://bugs.launchpad.net/ubuntu/+source/kickseed/+bug/48311 for example. I'm having to trial&error my way to a working method. I think preseed is superior.
[18:10] <uvirtbot`> Launchpad bug 48311 in kickseed "kickstart partitioning fails with --recommended or --asprimary" [Medium,Confirmed]
[18:12] <F3Speech> RoyK: the cifs error only happens after i guess hour+ i dont have the exact time. Server can run all night while im using it with no problem as soon as i logoff and go bed about hour later i get "CIFS VFS: Unexpected lookup error -112" every minute or so printed to screen
[18:12] <zapotah> also not sure if you need to specify the partition to be used as lvm
[18:12] <stemid> kickstart docs say part pv.01
[18:13] <stemid> and then volgroup pv.01 and so forth
[18:13] <stemid> but it seems like I finally got part to work. now to try volgroup
[18:13] <zapotah> partition / --size=1 --grow --ondrive=sda #Rest
[18:13] <zapotah> im assuming that is the lvm partition
[18:13] <stemid> that would be part pv.01 instead of part / for lvm
[18:13] <stemid> it will be, later
[18:13] <stemid> I just had to get past the part issues
=== hack is now known as megha
[18:16] <zapotah> https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Installation_Guide/s1-kickstart2-options.html
[18:16] <zapotah> most of that should work
[18:18] <stemid> thanks I had the old version open http://www.centos.org/docs/4/html/rhel-sag-en-4/s1-kickstart2-options.html#S2-KICKSTART2-OPTIONS-PART-EXAMPLES
[18:18] <stemid> also centos
[18:18] <zapotah> at the end is a pretty good example
[18:18] <stemid> it actually looks like it's working with volgroup and logvol now! =)
[18:18] <zapotah> the ubuntu documentation pointed to the version i pasted
[18:19] <stemid> it's past the partitioning stage, I just have to boot it up and see how it looks before I declare victory over kickstart
[18:19] <stemid> the ubuntu wiki actually hinted that there was no lvm support in kickstart
[18:19] <stemid> yet
[18:20] <zapotah> yes the documentation is old at best in some points :)
[18:20] <stemid> that's why I had some hope left
[18:20] <stemid> wanted to try it
[18:20] <zapotah> btw what did you change?
[18:21] <stemid> I'll paste the whole file
[18:21] <stemid> it's going on my wiki in swedish anyways
[18:23] <stemid> just booted it up and it looks good. here's the whole file as it is. http://wiki.sydit.se/dokument:naetboota_ubuntu_12.04?&#kickstart
[18:24] <zapotah> ah so it was the lvm partition designation
[18:25] <zapotah> it has been so long since i used kickstart last that i can barely remember what it included :)
[18:25] <stemid> I'm glad I can use kickstart instead of preseed because I can also use it for centos and rhel.
[18:25] <stemid> before I have only used preseed to install debian.
[19:03] <arrrghhh> Hey, what do I edit instead of resolv.conf now?
[19:03] <arrrghhh> oh right I include that dns-nameservers in my /etc/network/interfaces...
[19:05] <patdk-lap> or delete resolv.conf and recreate it
[19:33] <Ubiquity> I'm attempting to set up wake on lan. My bios are set and ethtool is configured. I'm looking at my router right now and seeing the packet reach the connection but the computer isn't turning on. Can you help me troubleshoot?
[19:34] <Ubiquity> (ubuntu 12.04 serrver)
[19:41] <RoyK> Ubiquity: I don't know if wake on lan is an ubuntu thing
[19:41] <Ubiquity> it's not an ubuntu thing. Just curious if someone can help me troubleshoot it
[19:41] <Ubiquity> for some reason i can't speak on #linux
[19:41] <Ubiquity> even though i've never visited before
[19:44] <RoyK> perhaps you need to register with nickserv?
=== Ubiquity is now known as Alabaster_W
=== Alabaster_W is now known as Ubiquity4321
[19:46] <Ubiquity4321> oh wow i feel dumb
[19:46] <Ubiquity4321> i'll show myself out
[20:09] <arrrghhh> Hey, is it possible to change the mountpoint of /var after I've installed the system?
[20:10] <arrrghhh> I cp'd the contents of /var to another partition and tried to change fstab and reboot... it wasn't very happy.
[20:11] <arrrghhh> hrm... that didn't work like I expected it to
=== cpg|away is now known as cpg
[20:19] <stemid> https://help.ubuntu.com/community/KickstartCompatibility "The post install script runs right before the reboot in the installation. " this is a very blurry statement imo because the postinstall script actually runs before user creation.
[20:19] <stemid> which makes it useless for things like ssh keys.
[20:19] <stemid> unless I create users in the postinstall script
[20:20] <Zer0Glitch> Does anyone here have experience with hosting IRC?
[20:23] <Zer0Glitch> 363 people and not one response... Wow. The NSA bots are running overdrive.
[20:25] <qman__> !patience
[20:25] <ubottu> Don't feel ignored and repeat your question quickly; if nobody knows your answer, nobody will answer you. While you wait, try searching https://help.ubuntu.com or http://ubuntuforums.org or http://askubuntu.com/
[20:25] <qman__> this channel doesn't move that fast
[20:26] <patdk-lap> 363 people is not very many
[20:27] <yeats> Zer0Glitch: if you post your actual problem/question, someone may be able to help
[20:32] <arrrghhh> can I change /var's mountpoint after installing the OS?
[20:32] <arrrghhh> I'd like to move it to an expandable lvm volme...
[20:32] <arrrghhh> volume*
[20:32] <qman__> you can, but you'll have to do it offline
[20:33] <qman__> too much going on there to try and do it live
[20:33] <arrrghhh> qman__, i just cp'd /var live to the lvm partition
[20:33] <arrrghhh> changed fstab
[20:33] <arrrghhh> and rebooted
[20:33] <qman__> that can cause problems
[20:33] <qman__> because there's lots of lock files and things there
[20:33] <arrrghhh> k.  so copy it offline?
[20:33] <qman__> that normally get removed at shutdown
[20:33] <qman__> yeah
[20:33] <arrrghhh> cool
[20:33] <arrrghhh> other than that, it should work ?
[20:34] <qman__> yes
[20:34] <arrrghhh> thx :)
[20:34] <qman__> if you shut down, copy it over, adjust fstab, and boot back up, it should work
[20:34] <qman__> use rsync instead of cp though, make sure the permissions copy
[20:34] <stemid> Zer0Glitch: you should perhaps be more specific. I've hosted a hybrid ircd with anope services about 8 years ago.
[20:34] <stemid> not sure how much that means today
[20:34] <arrrghhh> ah yes.  love me some rsync.
[20:35] <stemid> I managed to unmount /var online once. I just shutdown all the services using /var. checked which ones using lsof. but at that point you're better off just doing it offline since the system is not operational anymore.
[20:38] <Zer0Glitch> Two conjoined questions, actually:
[20:38] <Zer0Glitch> - Are there resources you can recommend for the setup and secure hosting of an IRC server?
[20:38] <Zer0Glitch> - Do I have to worry about any security issues with hosting IRC?
[20:40] <qman__> running a public IRC server is a huge undertaking
[20:40] <qman__> you have to manage it full time to defend against people using it to spam and run botnets
[20:41] <qman__> I don't run one because it's too much work
[20:42] <qman__> you need at a bare minimum to have at least one oper on line 24/7
=== cpg is now known as cpg|away
[20:44] <Zer0Glitch> I was wanting to run one so I could embed/link it with my hosted Wordpress blog.
[20:45] <Zer0Glitch> Would it be better then to embed from someone else's service, who is running as a larger operator?
[20:46] <qman__> unless you already have trustworthy staff that can run it, then yes
[20:46] <Zer0Glitch> Thanks qman, I appreciate the feedback.
[20:47] <qman__> it sounds to me like you just want to run one channel
[20:47] <qman__> and in that case you should find a network to host you
[20:47] <Zer0Glitch> Yes, only one channel... Next query: if any of you are hosting wordpress, are there plugins for Wordpress you wouldn't live without?
[20:48] <patdk-lap> I would live without wordpress, every week there is a new security issue with it
[20:48] <qman__> same, wordpress has an abysmal track record for security
[20:48] <Zer0Glitch> So better to go hosted, rather than hosting it myself?
[20:49] <qman__> if you're set on wordpress, then yes, find a host with a good reputation for fixing things when they break
[20:49] <qman__> because they will
[20:50] <Zer0Glitch> I presently use 1&1 and PEER1
[20:50] <qman__> you know all those fedex/UPS/intuit phishing scam emails?
[20:50] <qman__> those were all sent out using compromised wordpress sites
[20:51] <qman__> at one point I had a content filter on my mail server filtering out URLs which contained wp-content
[20:51] <qman__> it was that bad
[20:52] <Zer0Glitch> Wow. That's pretty bad
[20:57] <Zer0Glitch> Thanks for your help, guys
[21:00] <arrrghhh> hey qman__ - I'm in the live environment... and I installed lvm2, I can see the logical volume (says it's active at /dev/OS/OS) but when I try to mount it, mount says that special device does not exist?
[21:00] <arrrghhh> is there something else I have to do to initialize LVM in a live environment so I can mount it?
[21:00] <qman__> you need to mkfs on the lv
[21:00] <qman__> such as mkfs.ext4 /dev/mapper/logvolname
[21:01] <arrrghhh> hrm.  I did that already... I guess I can do it again, I'm not going to lose anything heh
[21:01] <arrrghhh> I did that in the install tho, not the live enviro
[21:01] <qman__> well, your LVs should exist in /dev/mapper by name
[21:01] <qman__> are they there?
=== ajmitch_ is now known as ajmitch
[21:04] <arrrghhh> ah if I mount /dev/mapper/OS-OS it works
[21:04] <arrrghhh> for some reason /dev/OS/OS didn't work.  no biggie
[21:05] <arrrghhh> rsyncing now :)
=== cpg|away is now known as cpg
[21:11] <arrrghhh> lol what have I done
[21:12] <arrrghhh> GRUB menu is now stalling...?  I am forced to make a selection.  How do I fix that?  I don't know how I even made it stall like this...
[21:12] <qman__> check /etc/default/grub to ensure that it's got a default selection and timeout configured
[21:12] <qman__> then run update-grub
[21:12] <arrrghhh> k
[21:13] <qman__> could also be a stuck key
[21:13] <qman__> or accidentally pressed key
[21:13] <arrrghhh> I unplugged the kb
[21:13] <qman__> ah
[21:14] <qman__> might be disk order or something getting shuffled around causing it, update-grub should fix that
[21:14] <arrrghhh> hrm... boot still fails on /var.  fsck.ext4 says it can't check /dev/sda3 which is my lvm aka /var...
[21:14] <arrrghhh> I wonder if my fstab statement is bad
[21:14] <qman__> if sda3 contains the lvm, you need to not have sda3 in fstab
[21:15] <qman__> you need to have by UUID or LV
[21:15] <arrrghhh> I don't have any sda's in fstab
[21:15] <arrrghhh> they're all UUID... perhaps that is the issue?
[21:15] <arrrghhh> the LVM is also by UUID
[21:15] <qman__> no, that's how it should be
[21:15] <qman__> but did you update the UUID to be the new filesystem's UUID?
[21:16] <arrrghhh> Yes, I believe so...
[21:17] <arrrghhh> I guess let me skip the mount and doublecheck
[21:19] <arrrghhh> yup, uuid is right
[21:19] <arrrghhh> oh derp.  i put the type as ext4
[21:19] <arrrghhh> i'm guessing that might cause an issue
[21:20] <qman__> it should be whatever the filesystem is
[21:20] <qman__> which I assume is ext4
[21:20] <arrrghhh> crap... it was ext4.
[21:21] <arrrghhh> So I don't know what's wrong then
[21:21] <qman__> well, you could try the non-UUID name to test
[21:21] <arrrghhh> ok
[21:21] <arrrghhh> The /dev/mapper location?
[21:21] <qman__> I don't have anything to reference because I don't actually have any set up that way
[21:21] <qman__> I think so, yes
[21:25] <arrrghhh> qman__, so by name worked
[21:25] <arrrghhh> blkid shows a UUID for the LVM device...
[21:26] <arrrghhh> hrm.  there's a separate UUID for the mounted device
[21:26] <arrrghhh> I think I'll try using that UUID
[21:26] <qman__> yeah
[21:27] <arrrghhh> Cool!  Seemed to work, thx qman__
[21:28] <qman__> great
=== cpg is now known as cpg|away
[22:00] <TheLordOfTime> SpamapS, alive yet?
[22:00] <TheLordOfTime> (probably not, in which  case i'll catch you tomorrow)
[22:03] <anuvrat> need help installing ubuntu-server on a 2 TB hdd
[22:03] <anuvrat> Does the bios_boot_partition need to be 1MB, can it not be 100 MB?
[22:04] <qman__> what do you mean by bios_boot_partition?
[22:05] <anuvrat> qman__: read it here http://velenux.wordpress.com/2012/07/12/grub-failing-to-install-on-debianubuntu-with-gpt-partitions/
[22:05] <anuvrat> qman__: I* read it here http://velenux.wordpress.com/2012/07/12/grub-failing-to-install-on-debianubuntu-with-gpt-partitions/
[22:05] <qman__> well, for one, GPT is not needed for a 2TB disk, the limit for msdos MBR is 2.2TB
[22:07] <anuvrat> qman__: okay ...
[22:07] <qman__> I'm looking for a more official/reputable document to answer for actually using GPT
[22:12] <qman__> ok, from what all I've been reading, it needs to be mentioned that bios_grub partition and /boot are two different things
[22:12] <qman__> I also see people making bios_grub partitions of all different sizes, not just 1MB
[22:13] <anuvrat> qman__: yes, I have read about /boot and bios_grub being different
[22:14] <anuvrat> qman__: I found something about the bios boot partition not being formatted. Is that the case?
[22:15] <qman__> yes, it doesn't seem to have a normal filesystem, just grub
[22:22] <anuvrat> qman__: what requires special support from motherboard, efi or gpt?
[22:22] <anuvrat> qman__: installation on another drive uses efi and it boots perfectly, is it possible that my system can not boot from gpt?
[22:36] <qman__> gpt allows for an mbr to be created for back compatibility, but efi requires board support
[22:36] <qman__> native gpt requires board support
=== cpg|away is now known as cpg
=== cpg is now known as cpg|away
=== sw is now known as sw6
=== cpg|away is now known as cpg
=== kkszysiu_ is now known as kkszysiu
