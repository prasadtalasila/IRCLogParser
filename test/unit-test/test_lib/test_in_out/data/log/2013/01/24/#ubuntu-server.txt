[00:03] <MraAlbertina> hi. do you know any way of detecting and configure the NIC briefly. ( i did a basic installation on other machine and installed openssh, then moved the hard drive to the one where i don't have any access to display. I can't get it to connetc to the network. So i believe it's necessary to detect the network card again, on this machine.
=== slank is now known as slank_away
[00:06] <sarnold> MraAlbertina: could be, check /etc/udev/rules.d/70-persistent-net.rules and /etc/network/interfaces  -- hopefully there're some details in those
[00:07] <MraAlbertina> sarnold: hi :) i don't have access to the machine... but i can login, pass and then issue commands - but no display
[00:08] <MraAlbertina> i just login, pass then sudo reboot pass ... and it did it
[00:08] <sarnold> MraAlbertina: hahaha, wow, what a kick. :)
[00:08] <MraAlbertina> :)
[00:09] <sarnold> MraAlbertina: the udev rules file has a comment that says it was autogenerated by /lib/udev/write_net_rules
[00:09] <MraAlbertina> so, i believe if i force to recognize the new nic it might work, with sort commands
[00:09] <MraAlbertina> sort/short
[00:10] <sarnold> bleh, reading /lib/udev/write_net_rules doesn
[00:11] <MraAlbertina> so... the only way might be to write a file in a pen and copy it over the one in there
[00:11] <sarnold> doesn't give many hints to its correct use. pff.
[00:11] <MraAlbertina> or moving the hard drive back to the installation box... a big pain :(
[00:11] <sarnold> MraAlbertina: try just a bare "/lib/udev/write_net_rules", then reboot, and see what happens? :)
[00:12] <MraAlbertina> okay
[00:12] <MraAlbertina> where could i get a copy of it, you know?
[00:13] <MraAlbertina> don't worry if is too much work for you, i'll find it
[00:13] <sarnold> MraAlbertina: it's in the 'udev' package; if it isn't installed yet, it might not even be the right track..
[00:14] <MraAlbertina> sarnold: i can't see what's installed, that's the problem.
[00:14] <MraAlbertina> it's ok. tomorrow i'll try to install in a different way
[00:14] <sarnold> *snort*  dpkg -l udev && reboot    ....
[00:15] <MraAlbertina> snort? :o
[00:15] <sarnold> if it reboots, it was installed :)
[00:15] <MraAlbertina> okokok
[00:15] <sarnold> there's gotta be some better way to get boolean status out of a machine than a reboot....
[00:18] <MraAlbertina> sarnold: it's fine, that's a new installation so no problem with running servers
[00:19] <MraAlbertina> there are no running servers anyway, it was a basic install
[00:22] <MraAlbertina> no... didn't reboot. tried 3 times :( so it means no changes
[00:28] <MraAlbertina> the wireless led is on. i think there is a way of making a temp connection to wan. if so i'll ssh and change everything
[00:28] <MraAlbertina> i didn't cinfigure wireless during the installation...
[00:28] <MraAlbertina> conf*
=== cpg is now known as cpg|away
=== cpg|away is now known as cpg
[03:32] <Free99> hello. I'm trying to resize a 1997Gb ext4 partition down to 1996Gb, I need the extra space for drbd metadata. Issue i'm running into is that every time I try running `resize2fs /dev/sdb 1996G` I get told that the requested size is larger than the number of blocks for the whole drive
[03:32] <Free99> what am I doing wrong?
[03:33] <sarnold> Free99: /dev/sdb
[03:34] <sarnold> Free99: it should probably be a partition, e.g. /dev/sdb1 or /dev/sdb2 or similar
[03:34] <Free99> so it should be /dev/sdb1
[03:34] <Free99> ok
[03:34] <sarnold> how's the projcet going otherwise? :)
[03:35] <Free99> last step before I start syncing, the other server is ready to sync with this one via drbd. pretty psyched
[03:35] <sarnold> awesome :D
[03:36] <Free99> sarnold: so I ran `resize2fs /dev/sdb1 1996G` and it says, "The containing partition (or device) is only 487584768 (4k) blocks.
[03:36] <Free99> You requested a new size of 523239424 blocks."
[03:36] <Free99> meanwhile cfdisk tells me that sdb1 is 1997.21 gigs
[03:37] <sarnold> Free99: can you interact with the programs using units of kilobytes? the 1000 vs 1024 mega and giga stuff would terrify me to no end
=== cpg is now known as cpg|away
[03:37] <Free99> I guess that makes sense hahaha
[03:38] <Free99> is there a difference between sector size & blocks?
[03:40] <sarnold> Free99: well.... most <2TB drives use 512 byte sector sizes / blocks (though I think they use 540 bytes on disk, what with error correcting codes...) -- but some new, large, drives use 4k sectors. or so I've heard.
[03:41] <Free99> sarnold: interesting b/c the response it's giving me mentions 4k
[03:41] <Free99> 4k=4096 or 4000?
[03:41] <sarnold> Free99: 4096
[03:41] <sarnold> or at least I think the 1000 vs 1024 insanity never reached the kilobyte level :)
[03:43] <Free99> I just re-read the man page for resize2fs, the author is pretty funny when he mentions that everything is in base 2
[03:43] <Free99> gibibytes (facepalm)
=== cpg|away is now known as cpg
[03:46] <sarnold> Free99: it's actually -standardized-. *sigh* :)
[03:47] <marshall> hey ubuntu-server
[03:48] <marshall> i've got a server running a web app of mine. the app can be reached in the browser and stuff, but I can't ping google or anything when I ssh into the box. what could cause this?
[03:49] <qman__> missing or incorrect default gateway or DNS servers
[03:50] <sarnold> can you ping ip addresses?
[03:50] <marshall> let's see...
[03:51] <marshall> sarnold: yeah, i can ping google's ip
[03:51] <sarnold> marshall: yay :) that's probably dns then. check /etc/resolv.conf and /etc/nsswitch.conf (rare for that one to break..)
[03:51] <virusuy> howdy gents !
[03:51] <virusuy> greetings from Uruguay !
=== stooj_ is now known as stooj
[03:52] <marshall> qman__: i'm not the one hosting the server, i'm the dev. the host said they would implement ssl for us sometime today, and I'm pretty sure they messed it up, but I don't know how they could have messed it up to this point. they generated a key and cert file.
[03:54] <marshall> sarnold: everything looks normal in those files
[03:54] <Free99> sarnold: I got it resized, sweet!
[03:54] <sarnold> Free99: awesome :D
[03:54] <Free99> but now what?
[03:55] <Free99> can I just mount it or do I have to do anything?
[03:55] <sarnold> Free99: do whatever that drbd syncy thing you were going to do? :)
[03:55] <sarnold> Free99: wellllll, I'd probablybe inclined to fsck. got an hour? :)
[03:56] <Free99> hmmm. my entire department's VM disk repo, or waiting a little while. hmmm.
[03:56] <Free99> they're backed up though
[03:56] <Free99> sarnold: someone was mentioning that I have to delete the partition and then recreate it
[03:56] <Free99> is that true?
[03:57] <hallyn> stgraber: you know, i just built your ppa's lxc (not the pending one, the one with logfile changes) and lxc-info works fine for me
[03:58] <hallyn> ah
[03:58] <hallyn> it's a permission thing!
[03:58] <hallyn> sudo lxc-info works, lxc-info does not
[03:58] <marshall> sarnold, qman__: what do you know, the host screwed up the DNS outside the server. Thanks for your help, gentlepersons.
[03:58] <sarnold> Free99: that was escott; his advice sounded good to me, or at least resizing the partition to match reality, made sense to me. but I've not done what you're doing. :)
[03:58] <sarnold> marshall: woot. nice. :)
[03:58] <Free99> cripes man, that's what really has me nervous lol
[03:59] <sarnold> Free99: I did a resize once, a decade back, using lvm. I was terrified to run that resize2fs command, but it all worked in the end.
[03:59] <hallyn> stgraber: heh i'll have to think about that
[04:00] <hallyn> i might just say "screw it, that means we wait until we have unprivileged containers"
[04:00]  * hallyn goes to put his chin on his fist in a thinking pose
[04:00] <sarnold> that might be a long wait :)
[04:00] <escott> Free99, sarnold im here, but i can't promise to remember what i said earlier
[04:00] <sarnold> escott: I've got it in /lastlog if it'd be helpful :)
[04:01] <escott> Free99, you were shrinking some partitions right?
[04:01] <sarnold> < escott> Free99, the steps for something like that are usually (a) resize2fs (b) fsck (c) mount to make sure (d) umount (e) write down the partition begin and end address in LBA and CHS if you have got it (f) back up the table (g) modify the table deleting partition if needed (h) recreate the table (i) remount
[04:01] <Free99> escott: you mentioned fsck'ing the resized partition, check the data was still there, then resize the partition by noting the start and end
[04:01] <escott> sarnold, thanks
[04:02] <escott> Free99, there are two instances where the size of the partition are recorded. one in the filesystem and one in the partition table
[04:02] <stgraber> stgraber@castiana:~$ sudo lxc-info -n qatracker01
[04:02] <stgraber> lxc-info: could not build log path
[04:02] <stgraber> hallyn: ^
[04:02] <escott> Free99, you want to always ensure that the partition table entry is larger than the filesystem entry
[04:02] <hallyn> stgraber: that's not the error I get
[04:02] <hallyn> stgraber: I get lxc-info: failed to open log file "/var/lib/lxc/r1/r1.log" : Permission denied
[04:02] <escott> Free99, so after you resize2fs you can then shrink the table entry to match the filesystem
[04:03] <escott> Free99, tools like gparted would do that on your behalf
[04:03] <Free99> escott: that doesn't make sense, wouldn't you want to limit the size in software before you got your butt kicked by the hardware?
[04:03] <Free99> escott: doing this on ubu server, no X11
[04:03] <stgraber> hallyn: I get the same error as root and non-root. Let me strace it, see what's going on.
[04:03] <Free99> escott: I realized they are both software lol
[04:04] <escott> Free99, that is what i am describing. you limit in software (resize2fs so that the ext2 partition knows it should be smaller) and then you limit in "hardware" (cut off part of the disk with the table)
[04:04] <escott> Free99, you just dont want a situation where ext2 would be trying to write to a location which would be beyond the end of /dev/sda7 or whatever the partition device is
[04:04] <Free99> escott, now that i've resize2fs'd this mother, how do I change the partition? I was tinkering with cfdisk a little
[04:05] <escott> Free99, since you shrank you are now safe in that ext2 will never touch the bits at the end of the partition device, so you can shrink the device itself
[04:05] <stgraber> hallyn: strace doesn't show anything useful, so it fails before it tries to access/create something
[04:05] <escott> Free99, a tool like parted might allow you to shrink the partition in place, alternately you delete the entry/table and recreate in place (and then fix up UUIDs since they might be regenerated)
[04:06] <stgraber> hallyn: and I get the same problem with lxc-stop and lxc-start so can't try with a freshly started container either
[04:06] <Free99> spooky thing though, I ran cfdisk /dev/sdb and it tells me there is nothing but free space
[04:06] <hallyn> stgraber: then your build is different from mine.  weird
[04:06] <escott> Free99, might it be a gpt table?
[04:06] <hallyn> stgraber: what version exactly?
[04:06] <stgraber> hallyn: oh, would the fact that /var/lib/lxc is a symlink mess with your stuff? :)
[04:06] <escott> Free99, does sudo parted -l /dev/whatever show msdos or gpt table type
[04:06] <hallyn> yes it probably would
[04:06] <stgraber> hallyn: 0.9.0~alpha2-0ubuntu1+b1~bzr1099-27~201301230251~raring1
[04:06] <Free99> escott: nope, I ran it on /dev/sdb1 not sdb
[04:06] <Free99> so my bad again
[04:06] <stgraber> hallyn: my /var/lib/lxc and /var/cache/lxc are symlinks to sub-directories of /home/ :)
[04:07] <hallyn> yeah we've got the same versions
[04:07] <hallyn> lemme try as a symlink into /mnt
[04:08] <hallyn> stgraber: how long is the pathname then?
[04:08] <hallyn> stgraber: no, /var/lib/lxc as symlink to /mnt/lxc doesn't cause any issues here
[04:09] <stgraber> hallyn: my /var/lib/lxc/qatracker01/ once expanded would become /home/stgraber/data/vm/lxc/lib/lxc/qatracker01/
[04:09] <Free99> escott: it's an msdos disk
[04:09] <stgraber> a tiny bit shorter than that actually: /home/stgraber/data/vm/lxc/lib/qatracker01/
[04:10] <Free99> escott: http://pastebin.com/A7nRB3y1
[04:11] <Free99> I ran `resize2fs /dev/sdb1 487559168` to shrink the partition
[04:11] <escott> Free99, and your next change is to the table which is /dev/sdb
[04:11] <escott> Free99, not sdb1 as you already noted
[04:12] <Free99> so how do I do this without losing data? tried googling this but it doesn't seem really clear
[04:14] <escott> Free99, see if you can use parted on the command line to shrink the partition. That would be the easiest
[04:14] <hallyn> stgraber: that still works fine for me.  (wtf?)
[04:14] <escott> Free99, something like "sudo parted /dev/sdb" resize partition_number start end
[04:15] <Free99> how do I know what the end is?
[04:15] <escott> Free99, it would be start+size
[04:15] <hallyn> stgraber: hm.  wait.  I think I made the mistake I warned you about earlier :
[04:16] <escott> Free99, in your case start+487559168 (making sure you have matching units everywhere)
[04:16] <Free99> escott: I changed the size of the partition by 25,600 4096-byte blocks
[04:18] <Free99> escott: so parted is saying the start is at 1049kB
[04:18] <Free99> I multiply that by 512 to get the start that I have to add to "start+487559168"
[04:19] <Free99> is that correct?
[04:19] <Free99> I'm sorry to be leaning on you like this
[04:19] <stgraber> hallyn: the path length is the problem
[04:19] <stgraber> hallyn: "p1" will work fine "a-long-name" won't
[04:20] <escott> Free99, 487559168 is in what bytes?
[04:21] <Free99> I...guess so?
[04:21] <stgraber> hallyn: 40 characters to the container path works, 41 doesn't (if that means anything to you)
[04:21] <Free99> escott: it's in 4k blocks
[04:22] <stgraber> hallyn: also, "lxc-start -n abc" where "abc" doesn't exist, will still create the directory and logfile. We probably don't want that to happen if the container doesn't exist :)
[04:22] <escott> Free99, so you shrank the disk from something like 1860GiB to 1859.9 GiB
[04:23] <Free99> right, only need about 100mb
[04:23] <Free99> really, 58.6mb by calculations
[04:23] <hallyn> stgraber: your main failure is due to my typing 'sizeof' instead of 'strlen' :)
[04:24] <Free99> escott: but I rounded up
[04:24] <stgraber> hallyn: (and me not spotting it in the review ;))
[04:24] <hallyn> stgraber: as for the logfile getting created, I'm actually not sure you can get what you want there, bc you want two conflicting things:
[04:24] <escott> Free99, so by my calculation your new partition needs to run from
[04:25] <hallyn> 1. if someone specified logdir as /var/log/lxc, you want /var/lgo/lxc to get created
[04:25] <hallyn> 2. if someone specified /var/lib/lxc/container, you don't want that to get created :)
[04:25] <hallyn> note, the container not existing is something that gets logged
[04:25] <escott> Free99, 1049kB to 1950237721kB
[04:25] <escott> Free99, but then this is where things get fun
[04:25] <hallyn> i suppose this might mean Dwight can't get what he wants,
[04:25] <hallyn> and we insist on using /var/log/lxc/container.log
[04:25] <escott> that 1049kB might (and probably is) something like 1048.5 kB but is rounded up
[04:25] <hallyn> but there is still the other problem - unprivileged users
[04:26] <hallyn> unless we only default to the logfile for lxc-start and lxc-execute, and everything else defaults to console
[04:26] <stgraber> hallyn: for the record, I really like the idea of having /var/log/lxc/<container>.log and not /var/lib/lxc/<container>/<container.log :)
[04:26] <escott> Free99, so you might want to go into parted and type
[04:27] <escott> Free99, "unit B; print" to and then do everything in bytes
[04:27] <stgraber> hallyn: well, in my case, it was lxc-start creating the directory I didn't want, so having only lxc-start and lxc-execute do the logging won't really help there
[04:27] <Free99> yeah, took your value, mutiplied by 1024 then divided by 4096, its pretty close to what resize2fs says the partition got resized to
[04:28] <hallyn> stgraber: no, those are separate issues, indeed that wouldn't help
[04:29] <hallyn> stgraber: ok i might respond to your email tomorrow then - thanks for spottin gthis, sorry for the inconvenience
[04:29] <hallyn> i thought i had it all figured out
[04:29] <hallyn> (meddling kids)
[04:29] <stgraber> hallyn: I think we need a sane fallback if the default log location isn't writable (where the fallback is likely to be no logging at all) and we'll just have lxc-create write a decent lxc.logfile when using a user namespace
[04:29] <escott> Free99, and then add to the bytes reported by parted as the start the bytes reported by dumpe2fs on the device /dev/sdb1
[04:30] <Free99> escott: so the value I get is 487559168*(4096/1024)=1,950,236,672
[04:30] <Free99> thats in kB
[04:31] <stgraber> hallyn: but yeah, I think we'll need to write down all the scenari and make sure we do something we think is sensible in all cases (offering enough flexibility so that distros can easily change the locations)
[04:31] <stgraber> hallyn: anyway, talk to you tomorrow!
[04:31] <escott> Free99, sure i may have typed a number wrong when i was putting it in the calculator. I would suggest you work in physical blocks or smaller because parted will round up/down
[04:32] <Free99> well I clucked up, typed dumpe2fs /dev/sdb1 and now ssh is getting mad at me, I can't press ctrl-c any faster
[04:32] <hallyn> stgraber: yup, ttyl
[04:32] <escott> Free99, so Bytes or 512Bytes not logical blocks (4k)
[04:32] <Free99> escott: just wanted to check that the numbers were close
[04:34] <escott> Free99, you can safely round the size of the ext2 partition up, but you cannot miss that starting block
[04:34] <Free99> escott, roger that.
[04:35] <Free99> escott: how's this look? `(parted) (parted) resize 1 1049kB 1950236672kB`
[04:37] <Free99> hmm. getting a complaint about incompatible features on the partition
[04:38] <Free99> I already cleared out the journal
[04:38] <escott> Free99, you disabled the journal?
[04:38] <Free99> tune2fs -O ^has_journal /dev/sdb1
[04:39] <escott> Free99, annoying that you would have to do that
[04:39] <escott> Free99, i realize it probably would have been easier to do the whole resize operation inside parted. i was giving the quick overview last night before i signed off
[04:40] <Free99> escott, well it's still not working, not sure what features are stopping this
[04:40] <escott> Free99, at this point parted should not care what kind of filesystem is on that partition
[04:41] <escott> Free99, because it should be small enough, but it probably checks it anyways just to make sure its a safe operation and then pukes because of other non-journal features it cannot handle (maybe extents)
[04:42] <escott> Free99, with another tool like fdisk you can just delete the partition and create a new one in the place left over
[04:42] <escott> Free99, you just have to get it all lined up correctly
[04:43] <Free99> escott, erm. I'm kind of cool with just disabling features, resizing, then enabling. doesn't that seem more sensible?
[04:43] <Free99> longer though
[04:43] <escott> Free99, disabling extents will be a time consuming operation and could result in corruption pretty easily
[04:44] <Free99> oh snap
[04:44] <escott> Free99, i don't even know if you can disable all features... thats not usually the direction people go with features
[04:44] <escott> Free99, you have your backups. i would just back up the table with sfdisk, and then use fdisk to delete the partition and create the new one in the right place
[04:49] <Free99> escott: so based on what the manual says, running sfdisk -d /dev/sdb > /root/sdb.out ought to work?
[04:51] <escott> Free99, yes
[04:52] <escott> Free99, then make sure everything on that device is unmounted before playing around with the partition table. if anything goes south you can reload the backup table you just made
[05:03] <Free99> escott: if I write the end of the partition table incorrectly, but the beginning is fine, will I lose any data?
[05:03] <Free99> beginning = 2048 bytes
[05:04] <escott> Free99, it cant be short. otherwise its ok
[05:06] <Free99> ok phew
[05:06] <Free99> think I got it
[05:06] <Free99> one other question. how do I actually get my data onto the drbd?
[05:06] <Free99> since /dev/sdb1 is the disk device and /dev/drbd1 is the drbd thing...
[05:08] <Free99> woohoo! it worked! the resize part anyhow
[05:08] <Free99> thanks a million escott & sarnold
[05:13] <escott> Free99, do fsck that partition again, then mount it read only and look around before final sign-off
[05:14] <Free99> I did, also re-enabled the journal
[05:14] <escott> Free99, i dont know what the drbd thing is so...
[05:14] <escott> Free99, and then fsck after you re-enable... basically fsck every time you do anything
[05:15] <escott> but now that you have done it the painful way it should be much easier in the future
[05:32] <Free99> hey um escott
[05:32] <escott> Free99, yeah
[05:32] <Free99> so I ran a e2fsck and it's saying the superblock or partition table is corrupt
[05:33] <escott> Free99, well something isnt correct then
[05:33] <Free99> so should I restore the sfdisk dump?
[05:33] <escott> was it clean after you changed the partition size?
[05:34] <escott> or was it the change in partition size that caused the corruption?
[05:34] <Free99> "The filesystem size (according to the superblock) is 487558900 blocks
[05:34] <Free99> The physical size of the device is 445382656 blocks
[05:34] <Free99> "
[05:34] <escott> if it was an issue with shrinking the partition then yes restore it
[05:34] <escott> and then make the partition table the length evidently should be 487558900 blocks so verify thats what you said it would be
[05:35] <Free99> well I think the problem may have been with the resize2fs
[05:35] <Free99> partition table has to be larger than the resize2fs right?
[05:35] <escott> so your partition start was 1049kB which is something like 2000+ blocks into the disk
[05:36] <escott> so your end is going to be 2875 58 900 + 2000 = 2875 60 900 or so
[05:39] <Free99> so basically should I start with the resize2fs then do the partition table?
[05:40] <escott> Free99, did the resize2fs not shrink the filesystem?
[05:40] <Free99> b/c it's talking about the superblock, which sounds like the 2fs tools more than a mess-up in fdisk
[05:40] <escott> is 487558900 not the number of blocks you want?
[05:41] <Free99> but its saying the physical size of the device is 445382656
[05:41] <Free99> blocks
[05:41] <Free99> so apparently I added a zero at the end
[05:41] <Free99> and its way larger than possible
[05:41] <escott> Free99, the superblock number is what is coming from resize2fs. the physical is from fdisk
[05:42] <escott> Free99, its possible you accidentaly grew the FS
[05:42] <escott> Free99, so long as you never wrote to the disk you might not notice? seems strange though and fsck should have noticed that after the resize before the fdisk
[05:43] <Free99> I remember that the disk is 1997.21G
[05:43] <Free99> if each sector is 4096bytes, then...
[05:44] <escott> Free99, 4kB would be a standard logical block size for the filesystem, but it could be other sizes
[05:44] <escott> Free99, the disk will probably report a block size of 512B
[05:46] <Free99> hmm. ok, so how do I know where the problem lies?
[05:46] <Free99> is it with my fdisk or with my 2fs?
[05:46] <escott> Free99, i dont know what you started with so i dont know for sure what to say
[05:47] <Free99> I started with resize2fs
[05:47] <escott> 487558900 in 4kB blocks is 1859.9 GiB
[05:47] <Free99> yep, definitely messed up on the resize2fs
[05:48] <escott> 445382656 in 4kB blocks is 1699 GiB
[05:48] <escott> thats unfortunate b/c thats the slow one
[05:51] <Free99> dang man
[05:51] <Free99> I think the data is gone
[05:52] <escott> Free99, did you restore the table with sfdisk?
[05:53] <Free99> sfdisk -O sdb.out
[05:53] <Free99> right?
[05:54] <escott> Free99, its in the manpage "man sfdisk | grep -C5 -- -d"
[05:55] <Free99> oh phew!
[05:55] <Free99> it worked
[05:56] <Free99> good call bro
[05:56] <escott> as long as you don't mount the disk read-write until it passes an fsck you should be ok
[05:57] <Free99> any reason I should pick e2fsck over fsck or vice-versa?
[05:57] <escott> Free99, no. one will call the other
[05:58] <Free99> phew ok. passed fsck
[05:59] <Free99> files all seem to be there
[06:00] <Free99> think I ought to be ok to mount
[06:01] <escott> Free99, as long as you are passing fsck you should be fine
[06:07] <Free99> guess I'll try this again tomorrow. Thanks for your help escott
[06:08] <escott> Free99, alright goodluck
[06:08] <Free99> you rock man. peace
[06:08] <escott> Free99, you've stumbled through the basic mistakes and recovery so it should be easier for you tomorrow
=== smb` is now known as smb
[08:13] <daffy|2> Hi all
[08:13] <koolhead17> hi
[08:14] <daffy|2> i've a question about selecting a version when i'm installing a package with ubuntu (the latest)
[08:14] <daffy|2> i need to install a specific older version of java (java version "1.6.0_22")
[08:15] <koolhead17> daffy|2: oracle java is not specifically supported from ubuntu repo
[08:15] <koolhead17> you have to do it urself :)
[08:15] <daffy|2> :)
[08:16] <daffy|2> so i have to compil this version
[08:17] <daffy|2> i use the openjdk on my second server, but it's running under centos
[08:24] <koolhead17> daffy|2: yes. do it yourself :)
[08:29] <daffy|2> thanks for help
[08:36] <Spanky> Anyone know how to tell if "local application" in Java Visual VM is dangerous or not?
[08:37] <Spanky> I'll try #javasec...
=== yofel_ is now known as yofel
[09:51] <daniel_-> I get this error when I deploy to my server:        sudo: no tty present and no askpass program specified
[09:51] <daniel_-> my repo is in /var/git and gets deployed to /var/www
[09:55] <rbasak> daniel_-: did you get anywhere with RequestTTY in ~/.ssh/config and/or NOPASSWD in sudoers?
[09:56] <rbasak> daniel_-: I suppose another solution would be to change permissions so you don't need sudo
[09:56] <rbasak> daniel_-: Or you could set a suitable askpass
[09:56] <daniel_-> nopasswd I havent tried yet
=== matsubara-afk is now known as matsubara
[10:19] <daniel_-> hey rbasak there is no config in ~/.ssh
[10:19] <rbasak> daniel_-: by default there isn't one - you'll need to create it
[10:20] <daniel_-> on my server or my local computer?
[10:20] <rbasak> Local computer. You might want to limit the entry to apply to only your server with a Host directive. And I'm not entirely sure that it'll work with git. sudoers NOPASSWD should work. It all depends on the approach you want to take
[10:22] <daniel_-> rbasak: thx Ill try this one now
[10:27] <daniel_-> rbasak:        /Users/daniel/.ssh/config: line 4: Bad configuration option: RequestTTY
[10:28] <rbasak> daniel_-: it needs to go under a Host stanza
[10:28] <rbasak> daniel_-: Host my-server.example.com
[10:28] <rbasak> daniel_-:     RequestTTY yes
[10:29] <daniel_-> Host myhost
[10:29] <daniel_->   RequestTTY yes
[10:29] <daniel_->  /Users/daniel/.ssh/config: line 2: Bad configuration option: RequestTTY
[10:30] <daniel_->        /Users/daniel/.ssh/config: terminating, 1 bad configuration options
[10:30] <rbasak> Not sure then, sorry
[10:31] <daniel_-> np. Ill try some of your other solutions
[10:34] <daniel_-> what would I add to visudo? I mean I run a deploy from my local computer which checks out /var/git/xxx and deploys to /var/www/xxx All files and folders belong to my user
[10:35] <daniel_-> there is no git user on my /etc/passwd
[10:40] <rbasak> daniel_-: evidently your user is trying to do something as root by calling sudo as part of your deployment. If you want to stop the error this way, then either don't call sudo, or allow sudo to permit access as root without your password
=== cpg is now known as cpg|away
[10:41] <rbasak> As an example, this line allows the ubuntu user to access root without a password:
[10:41] <rbasak> ubuntu ALL=(ALL) NOPASSWD:ALL
[10:46] <daniel_-> thx
[10:49] <daniel_-> for your help rbasak
[10:50] <daniel_-> now it works
[11:18] <quietone>  I can't mount an encrypted drive, mount returns "NTFS signature missing"
[11:23] <psivaa> jamespage: virtual host server installations do not include cpu-checker from 20130120 onwards. Is that intended? (virtual-host smoke tests failing with kvm-ok not being installed doe amd64)
[11:25] <quietone> it's used for rdiff-backup and I didn't expect it to be NTFS
[11:25] <quietone> not much experience in this area. Any reading suggestions appreciated
[11:45] <Andrei> ...
[12:40] <psivaa> jamespage: Daviey: reported a bug for the issue above ^ bug 1103982
[12:40] <uvirtbot> Launchpad bug 1103982 in ubuntu-meta "cpu-checker is not included in virtual host server installations from 20130120 onwards" [Undecided,New] https://launchpad.net/bugs/1103982
[13:13] <LuizAngioletti> Hello there! How do I know the script I put under /etc/cron.daily/ is being run every day?
[13:13] <LuizAngioletti> The infos at https://help.ubuntu.com/community/CronHowto are a little out of date, as it seems.
[13:18] <virusuy> LuizAngioletti: take a look at /var/log/syslog
[13:19] <LuizAngioletti> done that.
[13:19] <virusuy> don't you see a line like
[13:19] <LuizAngioletti> It appears my script hasn't run, although I can see a line from cron at 6h25am this morning
[13:19] <virusuy> oh
[13:20] <LuizAngioletti> any ideas on why it wouldn't run? The perms and ownership are right.
[13:20] <virusuy> and what said that line ?
[13:21] <LuizAngioletti>  ubuntu CRON[19838]: (root) CMD (test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily ))
[13:21] <LuizAngioletti> virusuy: ?
[13:21] <virusuy> uhmm
[13:22] <virusuy> create a new script, a easy one .. like a scripts who execute "ifconfig -a" and send the output to a plain file in /tmp
[13:22] <virusuy> and see if that works
[13:22] <virusuy> if it does.. then is something wrong with your script
[13:23] <LuizAngioletti> my script takes some 30s to execute completely, could that be it?
[13:23] <LuizAngioletti> cron doesn't want to wait, or something.
[13:23] <virusuy> LuizAngioletti: nope..
[13:24] <virusuy> LuizAngioletti: that shouldn't be the problem
[13:24] <LuizAngioletti> and what if the script runs properly by means of ./script.sh?
[13:25] <virusuy> in your script, what do you do ??
[13:25] <virusuy> i mean
[13:25] <virusuy> using commands ... like in terminal ?
[13:26] <virusuy> or you execute instead of ifconfig -a ... /sbin/ifconfig -a
[13:26] <LuizAngioletti> I use commands like in the terminal.
[13:26] <virusuy> ok.
[13:27] <virusuy> probably thats the problem
[13:27] <LuizAngioletti> how?
[13:27] <virusuy> i do not really know why
[13:28] <virusuy> but sometimes, and in some cases..cron doesn't seems to have the right PATH to those commands
[13:28] <virusuy> and thats the reason why if you run manually your script it works
[13:29] <LuizAngioletti> So, I'd have to go... /sbin/ifconfig -a
[13:29] <LuizAngioletti> absolute paths?
[13:29] <LuizAngioletti> for everything?
[13:29] <virusuy> or set the path at the beggining of the script
[13:29] <virusuy> but i don't know if that's a "healty" practice
[13:30] <LuizAngioletti> PATH=$PATH:blah/blah?
[13:30] <virusuy> yes
[13:30] <virusuy> or
[13:30] <virusuy> you can set something like
[13:30] <virusuy> well.. what you said seems good
[13:30] <LuizAngioletti> =P
[13:30] <virusuy> anyway, wait a few minutes to see if someone where can help you with an easy way
[13:31] <virusuy> in fact help us :-P
[13:33] <LuizAngioletti> virusuy: thanks for the insight though.
[13:34] <virusuy> LuizAngioletti: you're welcome
=== Ursinha-afk is now known as Ursinha
=== Ursinha-afk is now known as Ursinha
=== slank_away is now known as slank
[14:45] <LuizAngioletti> Now that a lot of text has gone by...
[14:45] <LuizAngioletti> why would a script not be run by anacron?
[14:46] <LuizAngioletti> It runs perfectly as ./script.sh but it isn't run when under /etc/cron.daily/ or /etc/cron.hourly.
[14:47] <LuizAngioletti> virusuy: it doesn't work to simply put the PATH=$PATH:/blah
[15:04] <LuizAngioletti> virusuy: I don't really know why... but if I schedule my script to be run by "crontab -e", it gets run. If I simply put it under /etc/cron.hourly, it doesn't.
[15:06] <RoyK> how did you put it under /etc/cron.hourly? just copy or symlink the script in?
[15:06] <LuizAngioletti> RoyK: I copied it.
=== matsubara is now known as matsubara-lunch
[15:07] <RoyK> LuizAngioletti: looks like /etc/crontab uses run-parts to run those
[15:07] <RoyK> perhaps try manually
[15:08] <RoyK> or use the crontab ;)
[15:08] <LuizAngioletti> RoyK: That means that I can't simply put scripts under the .[period] directories?
[15:08] <LuizAngioletti> How do the files already in there get executed and mine don't?
[15:09] <RoyK> no idea
[15:09] <RoyK> check the logs
[15:09] <LuizAngioletti> RoyK: It doesn't get run.
[15:09] <LuizAngioletti> (my script I mean).
[15:09] <LuizAngioletti> the run-parts run normally.
[15:10]  * RoyK has no idea
[15:10] <LuizAngioletti> People simply put them under crontab?
[15:10] <RoyK> I usually use crontab -e, though, to keep all my stuff in one place
[15:10] <LuizAngioletti> ok.
[15:11] <LuizAngioletti> Well... it works there... =)
[15:11] <Pici> cron.hourly doesn't necessarly run at 0 minutes past, so I don't find it useful for my stuff either.
[15:11] <LuizAngioletti> Pici: It runs at 17 minutes past, by default.
[15:15] <rbasak> LuizAngioletti: is your script executable? Also, check the run-parts manpage for naming rules.
[15:15] <LuizAngioletti> rbasak: It is +x , and I've just done that. The script name is clean-operation.sh
[15:16] <LuizAngioletti> rbasak: I supose it can't be named with a . then.
[15:16] <rbasak> LuizAngioletti: there's run-parts --test /etc/cron.hourly. Does that list it?
[15:17] <rbasak> LuizAngioletti: ah yes. Looks like '.' is not permitted
[15:18] <LuizAngioletti> rbasak: It always pays to wait. Some knowledgeable sage comes to the rescue. =)
[15:19] <LuizAngioletti> RoyK: There is our answer. See, virusuy ?
[15:19] <virusuy> LuizAngioletti: wow.. nice
[15:20] <virusuy> rbasak: thanks !
[15:20] <rbasak> No problem!
[15:21] <LuizAngioletti> rbasak: =) thank you.
[15:28] <jcastro> jamespage: hey, do you know if elasticsearch on anyone's radar as far as packaging?
[15:28] <jamespage> jcastro, not that I am aware of - is it java?
[15:28] <jcastro> it is
[15:28] <jamespage> (guess it is as you are asking me :-))
[15:28] <jcastro> and the charm grabs from upstream and some people want a more debian-like experience
[15:37] <jibel> smoser, jodh I found bug 1103881 this morning, not really critical but really annoying. I *think* it's upstart but have no evidence. If you could have a look that'd be nice.
[15:37] <uvirtbot> Launchpad bug 1103881 in cloud-init "cloud-final is never executed if upstart is upgraded during initialization of the image " [Undecided,New] https://launchpad.net/bugs/1103881
[15:37] <smoser> jibel, hm... that is bad.
[15:49] <jodh> smoser/jibel: upstart will now restart itself on package upgrade if the running instance is capable of stateful re-exec. However, I don't know what that means in the context of cloud-init I'm afraid.
[15:52] <smoser> jodh, well, i'd hope that cloud-init can remain blisfully unaware
[15:52] <smoser> jodh, you can take a look at the upstart jobs there
[15:54] <jodh> smoser: the whole point of stateful re-exec is that it is supposed to be transparent to the system too. I think we need to see some logs here.
[15:56] <jibel> jodh, what kind of log do you need?
[15:57] <jibel> the issue is 100% reproducible with yesterday's images
[15:58] <jodh> jibel: the system log / dmesg with Upstart in debug mode (boot with --debug). Then we can see when the re-exec occurred and what happened afterwards.
[16:00] <jodh> jibel/smoser: to save me learning cloud-init, can you tell me at what point in the boot it runs apt-get?
[16:02] <Daviey> zul: did you see bug 1104137 ?
[16:02] <uvirtbot> Launchpad bug 1104137 in nova "FTBFS on raring in schroot" [Undecided,New] https://launchpad.net/bugs/1104137
=== matsubara-lunch is now known as matsubara
[16:03] <zul> Daviey: yeah its effing testrepository failures that i havent figured out how to fix them
[16:04] <zul> without disabling the tests
[16:05] <Daviey> zul: i fear it's blocking jdstrand
[16:05] <zul> Daviey: ill talk to him
[16:05] <zul> jdstrand: ping
[16:06] <jdstrand> hey
[16:10] <smoser> jodh, early-ish.
[16:10] <smoser> start on (filesystem and started rsyslog)
[16:11] <smoser> but other things shove that to also happen after networking is up
[16:14] <drPoo>  hi all, Im runnint 10.04 LTS on a headless server and I get the following when running df -h "100% /var/lib/ureadahead/debugfs". Has anybody ran into this issue? I found this page http://www.somewhereville.com/?p=1370 telling me to "sudo mv /etc/init/ureadahead.conf /etc/init/ureadahead.conf.disable". Any ideas?
[16:15] <roaksoax> SpamapS: hi Clint! How's everything? Hey I've seen you've been doing SRU's every now and then. When you can, do you mind taking care of bug #1049177 please? It would be very much appreciated
[16:15] <uvirtbot> Launchpad bug 1049177 in isc-dhcp "isc-dhcp-server apparmor profile should have include ".d" " [Medium,Fix committed] https://launchpad.net/bugs/1049177
[16:18] <SpamapS> roaksoax: yeah I do SRU's when I have some spare time... might have better luck with bdmurray today.
[16:23] <roaksoax> SpamapS: cool thanks :)
[16:25] <RoyK> drPoo: dunno - seems /var/lib/ureadahead/debugfs is on the root fs on my lucid box
[16:26] <RoyK> drPoo: pastbin output of "mount", please
[16:27] <jibel> jodh, logs attached to the bug report
[16:29] <pythonsnake>  where does service starting errors go to?
[16:30] <RoyK> daemon.log, usually
[16:30] <pythonsnake> thanks
[16:30] <pythonsnake> is it in var log
[16:31] <RoyK> yep
[16:31] <RoyK> erm, perhpas /var/log/syslog
[16:32] <drPoo> RoyK, http://pastebin.com/4gA40L5t
[16:34] <pythonsnake> hmmmmmmmmmmmmmm
[16:35] <drPoo> RoyK, and currently I cannot upgrade mountall because I have no space...
=== pythonsnake is now known as pythonnaute
=== pythonnaute is now known as pythonspace
=== RoyK is now known as Guest35945
=== RoyK^ is now known as RoyK
[16:58] <zul> hallyn: they just tagged a rc for libvirt 1.0.2 i think it would be good to have in raring
[16:58] <zul> er...not the release candidate but 1.0.2 final
=== pcarrier_ is now known as pcarrier
[17:08] <hallyn> zul: no objection from me.  Do you know if it contains the commit "qemu: Relax hard RSS limit" ?
[17:08] <hallyn> zul: and have you enabled --with-vbox?
[17:08] <hallyn> stgraber: just about ready with the new logfile patchset - good news is no packaging changes will be required for us now
[17:08] <zul> hallyn: havent looked at it yet hopefully this afternoon
[17:09] <stgraber> hallyn: nice
[17:10] <hallyn> zul: 'm sorry!  i thought you said *you* tagged it, i.e. had it ready :)
[17:10] <zul> hallyn: i wish
[17:16] <jamespage> hallyn, are you aware on anything in quantal which would cause the permissions on /dev/kvm to be root:root rather than root:kvm
[17:17] <jamespage> hallyn, I keep seeing it on a test system and its breaks my 'power control'
[17:17] <hallyn> zul: ok, well if i have time i was going to push a libvirt for those two fixes anyway, so let me know if you start the merge, otherwise i'll just merge
[17:17] <hallyn> (if i have time - i'm not here tomorrow)
[17:17] <hallyn> jamespage: i'm not aware of what it is, but we've seen it before (i.e. adam_g i think saw it)
[17:18] <zul> hallyn: sure remember they are rc candidates so im just suggesting we upload 1.0.2 when it hits final
[17:18] <hallyn> zul: oh, ok  nm then
[17:18] <hallyn> jamespage: it seemed as though udev wasn't seeing inotify updates of rules.d
[17:18] <hallyn> jamespage: oh, can you check your udev logfile?
[17:18] <hallyn> jamespage: is there a msg about group kvm not existing?
[17:18] <jacobjames> Hello. Downloading Ubuntu server right now. Trying to set up home web server. How do I go about this?
[17:19] <hallyn> if so, then perhaps i'll try simply restarting udev altogether
[17:19] <jacobjames> Also trying to get the remote desktop working?
[17:19] <jacobjames> Any help would be awesome. Thanks.
[17:19] <jacobjames> Remote desktop for multiple users that is.
[17:19] <RoyK> !ltsp
[17:19] <ubottu> LTSP is the Linux Terminal Server Project, which adds thin-client support to Linux servers. See chapter 3 of the !edubuntuhandbook, http://www.ltsp.org and/or http://en.wikipedia.org/wiki/Linux_Terminal_Server_Project
[17:20] <rbasak> jacobjames: https://help.ubuntu.com/12.10/serverguide/httpd.html
=== JoeVLcek is now known as JoeVLcek-lunch
[17:24] <patdk-wk> royk, I don't think he wanted many thinclients
[17:24] <jamespage> hallyn, I can reproduce it on demand by fixing the permissions and then stop/start qemu-kvm
[17:24] <jamespage> I also have an issue where nested kvm is not enabled on install; only after restart
[17:25] <axisys> how do I find out which disk is sdd ?
[17:25] <RoyK> jacobjames: what sort of remote desktop?
[17:25] <axisys> /dev/sdd rather
[17:25] <axisys> dd if=/dev/sdd1 of=/dev/null count=10000 bs=1024K to see which one showing activity.. any other way?
[17:26] <jcastro> heya smoser
[17:26] <smoser> hey
[17:27] <jcastro> http://askubuntu.com/questions/245096/adding-nodes-to-maas
[17:27] <jcastro> I asked around and someone told me that the missing wiki page is somewhere on the server team's pages, and to ask you
[17:27] <jamespage> hallyn, "Jan 24 12:27:16 caipora udevd[20668]: set permissions /dev/kvm, 020660, uid=0, gid=0"
[17:32] <hallyn> jamespage: you mentioned /dev/kvm being root:root  after install - are you sure you're not conflating that (sometimes happening) with the group::--- acl sticking around?
[17:32] <jamespage> hallyn, hmm
[17:32] <hallyn> jamespage: there are several issues all messing up /dev/kvm
[17:32] <hallyn> the one about stop/start qemu-kvm sounds new though, can you tell me more about it?
[17:32] <jamespage> hallyn, OK - so I restarted udev and then did the start stop of qemu and the permissions are correct
[17:32] <hallyn> jamespage: can you reproduce that again from scratch (from install)?
[17:33] <hallyn> if so, i think we have a udev bug
[17:33] <hallyn> that we can report
[17:33] <jamespage> hallyn, I've seen it on two systems now
[17:33] <jamespage> hmm - actually all 4
[17:33] <jamespage> I suspect that most systems get rebooted after install
[17:33] <hallyn> jamespage: yeah but there are so many things messed up i'd like 100% precise, specific, reproducible steps :)
[17:33] <jamespage> these ones don't
[17:33] <jamespage> hallyn, OK - lemme work something out
[17:34] <hallyn> jamespage: no not too long ago i 100% fixed it.  then it broke again :)
[17:34] <hallyn> jamespage: thanks!
[17:34] <hallyn> jamespage: and note, if you find kvm failing, but /dev/kvm is root:kvm 0660, then check 'getfacl /dev/kvm', which should show a group::--- acl in that case
[17:34] <hallyn> i have a bug with proposed 1-line patch for udev to stop that one
[17:36] <jamespage> hallyn, once the permissions are OK it works just fine.
=== JoeVLcek-lunch is now known as JoeVLcek
[18:11] <pythonspace> anyone got docs fr nginx fastcgi_params pleasE?
[18:11] <hallyn> zul: hm, actually i suspect 1.0.2 will require some packaging changes, something about manually removing ipv6 filter rules...  just heads-up
[18:12] <zul> k
[18:26] <Grey_Loki> Hi, i've got a server I haven't updated for a while, it's running 10.10, I want to upgrade it to the latest LTS release (which I believe is 12.04), what's the best way of doing this?
[18:26] <lifeless> sudo do-release-upgrade
[18:27] <patdk-wk> you will have to upgrade it to 11.04 -> 11.10 -> 12.04 :(
[18:27] <Grey_Loki> 'command not found' on sudo do-release-upgrade
[18:27] <lifeless> patdk-wk: wasn't 10.10 also an LTS? we support LTS->TLS upgrades
[18:27] <RoyK> sudo -i first
[18:27] <patdk-wk> apt-get install update-manager-core
[18:27] <Grey_Loki> Apparently 10.04 was an LTS
[18:27] <Grey_Loki> Not entirely sure why I didn't use that one on this box to begin with
[18:28]  * Grey_Loki smiles
[18:28] <lifeless> oh, rar yes.
[18:28] <patdk-wk> even .04 are lts :), 6.04 8.04 10.04 12.04 and hopefully 14.04
[18:30] <RoyK> Grey_Loki: it's usually little problems with upgrading, but issues may arise - just try
[18:30] <Grey_Loki> patdk-wk: apt-get update and apt-get install update-manager-core both fail with error: 404  Not Found [IP: 91.189.92.202 80]
[18:31] <patdk-wk> give it internet access?
[18:31] <patdk-wk> oh
[18:31] <patdk-wk> that is probably too old
[18:31] <patdk-wk> your going have to use the archive repo's
[18:32] <RoyK> 11.10 should be supported
[18:32] <patdk-wk> but he is using 10.10
[18:32] <patdk-wk> not 11.10
[18:32] <RoyK> oh
[18:32] <sarnold> 10.10 was natty, retired a while back
[18:32] <Grey_Loki> I'm updating from 10.10, here's a full pastebin of an apt-get update - http://pastebin.com/HpxXrbBP
[18:32] <Grey_Loki> patdk-wk: so an edit of /etc/apt/sources.list with some 'new' repos?
[18:32] <RoyK> Grey_Loki: there are archives out there
[18:33] <patdk-wk> archive.ubuntu.com
[18:33] <Grey_Loki> patdk-wk: the last parts of my pastebin mention archive.ubuntu.com - are they pointing to the right area?
[18:33] <patdk-wk> dunno, need to see sources.list
[18:34] <RoyK> patdk-wk: maverick isn't thhere
[18:34] <Grey_Loki> One mo.
[18:34] <patdk-wk> odd, why does it say maverick, if your on 10.10
[18:34] <sarnold> patdk-wk: my fault. sigh :)
[18:34] <Grey_Loki> patdk-wk: http://greyloki.dyndns.org/sources.txt
[18:34] <RoyK> patdk-wk: perhaps because 10.10 == maverick
[18:35] <patdk-wk> oh, now sarnold confused me :)
[18:35] <pythonspace> compile and install xorg without root <- possible?
[18:35] <patdk-wk> :)
[18:35] <RoyK> pythonspace: no
[18:35] <pythonspace> why
[18:35] <RoyK> pythonspace: compile, yes, install, no
[18:35] <sarnold> pythonspace: compile, probably :) install? no.. run? no..
[18:36] <pythonspace> even with prefix?
[18:36] <patdk-wk> Grey_Loki, adjust archive.ubuntu.com to old-releases.ubuntu.com
[18:36] <RoyK> pythonspace: Xorg runs as root
[18:36] <pythonspace> oO
[18:37] <TheLordOfTime> what RoyK said.
[18:37] <pythonspace> i thought i was running it as a user
[18:37] <pythonspace> xinit
[18:37] <pythonspace> Hm
[18:38] <pythonspace> How about running Xorg with ~200mb ram?
[18:39] <sarnold> pythonspace: should be doable, if you don't mind not running Gnome or Unity or KDE...
[18:39] <pythonspace> No DE of course
[18:40] <sarnold> pythonspace: dwm, wmii, i3, fluxbox, lxde, xcde (is that right?), might be more useful
[18:40] <pythonspace> I  want a skype server thingy
[18:40] <Grey_Loki> patdk-wk: apt-get update ran nicely with that, next step is to apt-get install update-manager-core and then do-release-upgrade as root?
[18:40] <patdk-wk> yep
[18:40] <patdk-wk> you might, or might not have to change that back though
[18:41] <RoyK> pythonspace: perhaps twm?
[18:41]  * RoyK sniggers
[18:41] <sarnold> RoyK :)
[18:41] <pythonspace> how much ram do you think would a minimal xorg + skype consume?
[18:41] <sarnold> ... though you _can_ run X without any window manager, if you wish.
[18:42] <RoyK> pythonspace: with 200MB I'd forget about it
[18:42] <sarnold> pythonspace: Xorg on my laptop has 28 megabytes "resident" memory. no idea on skype...
[18:42] <pythonspace> :(
[18:43] <RoyK> Grey_Loki: yes...
[18:44] <RoyK> as patdk-wk said
[18:45] <pythonspace> how about
[18:45] <pythonspace> nvm
[18:46] <RoyK> dunno - window managers aren't really a server question, after all, nor is X
[18:46] <pythonspace> bitlbee server :P
[18:47] <sarnold> but why run X at all?
[18:48] <pythonspace> for skype
[18:48] <Andrei> why running xorg and skype on a server ?
[18:48] <pythonspace> for bitlbee skype support
[18:48] <Andrei> sorry, but i don't see the point
[18:49] <Grey_Loki> patdk-wk / RoyK - upgrading nicely, thanks for your help :)
[18:50] <RoyK> to 11.04?
[18:50] <patdk-wk> well, 10.10
[18:50] <patdk-wk> then onto 11.04 :)
[18:51] <patdk-wk> oh wait, he was on 10.10
[18:51]  * patdk-wk is hopelessly confused
[18:51]  * patdk-wk smacks himself
[18:51]  * RoyK attends
[18:51]  * TheLordOfTime chuckles
[18:52] <sarnold> patdk-wk: _I'm sorry_ :D
[18:56] <RoyK> brb - reboot
[18:59] <RoyK> b
[19:01] <cocoa117> when using nfsv4 to export filesystem to linux client. does the locally bind filesystem automatically export?
[19:01] <cocoa117> <cocoa117> e.g. /media/pool/family on /srv/sto/home/pans/multimedia type none (rw,bind)
[19:01] <cocoa117> so when i exports /srv/sto/home as root to clients, do i get access to the /meida/pool/family folder?
=== matsubara is now known as matsubara-afk
[19:03] <m_tadeu> hi...Im trying to build some sources and I'm getting this error -> No rule to make target `/usr/lib/libpangoft2-1.0.so', needed by `src/libwt.so.3.2.2'.  Stop.
[19:03] <sarnold> cocoa117: I don't think NFS exports cross filesystems
[19:04] <m_tadeu> the thing is that libpangoft2 is inside /usr/lib/x86_64-linux-gnu/
[19:04] <m_tadeu> how can I deal with this?
[19:04] <hallyn> zul: I will probably push http://people.canonical.com/~serge/libvirt.debdiff this afternoon
[19:05] <zul> hallyn: you dont need any additonal depends for vbox?
[19:05] <hallyn> zul: nope, builds just fine
[19:05] <zul> k
[19:05] <zul> +1
[19:05] <hallyn> gonna re-build and re-run the testsuite first...
[19:05] <sarnold> m_tadeu: it'd probably be easiest to install libpango1.0-0 or whatever package provides that file on your release...
[19:07] <cocoa117> sarnold, so does it mean i need to export each filesystem separately?
[19:07] <sarnold> cocoa117: that's my recollection
[19:11] <m_tadeu> sarnold: libpango1.0-0 is also in /usr/lib/x86_64-linux-gnu/
[19:13] <sarnold> m_tadeu: now I think you either get to teach your Makefile about multilib, or give it a new library search path..
[19:13] <m_tadeu> sarnold: autch
[19:13] <RoyK> there - perhaps done with rebooting this vm for a while...
[19:32] <adam_g> zul: http://people.canonical.com/~agandelman/g2_deps/pyparsing/ need this for quantumclient (and probably others)
[19:33] <zul> adam_g: looks good
[19:55] <zul> lifeless: so if you want to reproduce that reliably in a chroot, clone the git source for nova ; apt-get build-dep nova then run the testsuite
=== pythonspace is now known as pythonsnake
[20:20] <JonEdney> When I try to run screen on my 12.04 server, I receive "Cannot open your terminal '/dev/pts/1' - please check.".
[20:22] <JonEdney> Hmm, seems screen dont work when you su to the user, nvm
=== slank is now known as slank_away
=== slank_away is now known as slank
[20:46] <jcastro> utlemming: ooh, I have been waiting for non-manual cloud images, nice!
[20:47] <utlemming> jcastro: yup, its been a long time coming. 10.04 went out the door last night. And I am going to slowly turn on the others.
[20:47] <utlemming> jcastro: it was a fair amount of work to get everything in place though. A lot of moving parts.
[20:48] <hallyn> ahs3: netcf 0.2.3-1 pushed to ppa:serge-hallyn/virt for a test.  very minor changes, don't expect any problems
[20:48] <hallyn> ahs3: (will ping you when ready for push to experimental)
[20:49] <ahs3> hallyn: okey dokey.  thx for the heads up
[20:49] <jcastro> utlemming: I'm sure, I like how it matches the kernel cadence, that's hot action
[20:51] <hallyn> ahs3: if you get sick of these pls let me know :)
[20:51] <utlemming> jcastro: the kernel cadence was the easy part, and the natural choice. We want users to use the latest kernel.
[20:53] <ahs3> hallyn: heh.  no worries.  you may want to become a DD at some point :)
[20:57] <hallyn> ahs3: yup
[21:26] <jacobjames> Hey I just got finished installing Ubuntu Server... I am at a command prompt... NO GUI? What the heck do I do?
[21:27] <pythonsnake> lol jacobjames
[21:27] <jacobjames> yeah funny.
[21:27] <jacobjames> used to the nice ubuntu GUI.
[21:27] <pythonsnake> where did you install it
[21:27] <jacobjames> Least I was able to login
[21:27] <yeats> jacobjames: ubuntu server doesn't come with a GUI by default
[21:28] <jacobjames> how do i get one?
[21:28] <jacobjames> from the command line
[21:28] <pythonsnake> jacobjames: use ubuntu not ubuntu server
[21:28] <hallyn> apt-get install ubuntu-desktop works for me
[21:28] <jacobjames> I need to use the server to host my website.
[21:28] <yeats> jacobjames: I wouldn't add ubuntu desktop to a server
[21:28] <pythonsnake> you should probably learn to not use X
[21:28] <hallyn> (don't need desktop to host your website, but...)
[21:29] <yeats> jacobjames: I would do 'sudo apt-get install tasksel' and then 'sudo tasksel' selecting lxde
[21:29] <jacobjames> permission denied on the apt-get install ubuntu -desktop
[21:30] <yeats> jacobjames: if you're going to install the full desktop, I would do what pythonsnake suggests and just install desktop ubuntu
[21:30] <jacobjames> k working on taskel
[21:30] <pythonsnake> jacobjames: sudo
[21:30] <jacobjames> taskel is already at newest version???
[21:31] <pythonsnake> hmm
[21:31] <yeats> jacobjames: okay - then 'sudo tasksel'
[21:31] <virusuy> howdy gents!
[21:31] <jacobjames> nice. desktop loading.
[21:31] <jacobjames> Thanks python
[21:31] <yeats> jacobjames: you may be out of your depth if you're thrown by this kind of thing though
[21:32] <pythonsnake> how are you gonna configure your web server
[21:32] <jacobjames> Pretty computer savy, just some new territory. Should be climbing soon. Just gotta get some help on where to get the gear.
[21:32] <jacobjames> apache
[21:32] <jacobjames> got my a record pointed to my ip this morning.
[21:32] <pythonsnake> ok
[21:32] <pythonsnake> use nginx
[21:33] <jacobjames> what is nginx
[21:33] <pythonsnake> web server
[21:33] <jacobjames> different then apache?
[21:33] <pythonsnake> better
[21:33] <pythonsnake> for you, probably
[21:33] <jacobjames> cool. Thanks for the info.
[21:33] <jacobjames> what about a good ftp?
[21:33] <pythonsnake> and learn to use the command line <- urgent
[21:34] <sarnold> please don't use ftp
[21:34] <pythonsnake> ^^
[21:34] <uvirtbot> pythonsnake: Error: "^" is not a valid command.
[21:34] <virusuy> LOL
[21:34] <jacobjames> ok.
[21:34] <jacobjames> why shouldn't I use ftp?
[21:34] <jacobjames> anyone running thin clients out there?
[21:35] <virusuy> besides security issues ?
[21:35] <jacobjames> want to set up some thin clients on this server also.
[21:35] <virusuy> (related to ftp)
[21:35] <jacobjames> I though ftp was very secure?
[21:36] <pythonsnake> im curious, where did you get your server  jacobjames
[21:36] <jacobjames> off ubuntu site.
[21:37] <dingo311> i am having problems with my internet/server. at this point i get timeouts from ping but yet am still able to connect to the internet, browse... just fine. i cannot remote into the server nor do any of the websites i have work.... any ideas?
[21:37] <pythonsnake> jacobjames: did you buy it
[21:37] <jacobjames> no.
[21:37] <dingo311> ping fails on my win laptop as well as the server
[21:37] <jacobjames> free.
[21:37] <pythonsnake> is this on your desktop
[21:37] <jacobjames> what>
[21:38] <jacobjames> is this on your desktop>?
[21:38] <pythonsnake> where did you install ubuntu server
[21:38] <jacobjames> on my desktop computer.
[21:38] <pythonsnake> hmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm
[21:39] <pythonsnake> install ubuntu desktop O.O
[21:39] <jacobjames> ok.. I am confused.... If I have server edition installed what is the difference with the desktop version.
[21:39] <pythonsnake> dingo311: 'but yet am still able to connect to the internet'
[21:40] <pythonsnake> to your server?
[21:40] <jacobjames> ok you must be talking to the other guy>
[21:40] <dingo311> pythonsnake: no connections to the server, but using lynx for example i can browse the web, but ping times out
[21:41] <pythonsnake> lynx from where dingo311
[21:41] <dingo311> from the server
[21:41] <sarnold> jacobjames: ftp sends usernames and passwords in the clear (oops). ftp does not work well with NAT (annoying), and the active/passive mode is annoying. The binary vs ascii is annoying. There's no data integrity checks, so data can be replaced (accidentally or maliciously) and no one will ever notice. There's no standardized protocol for nearly anything, because it was assumed a human was sitting at the screen with sane filenames
[21:41] <pythonsnake> jacobjames: are you gonna use the desktop daily
[21:42] <jacobjames> so what is my alternative.
[21:42] <jacobjames> I just want to set up my server to host http://, ftp, and thin clients.
[21:43] <pythonsnake> dingo311: firewall?
[21:44] <hallyn> jacobjames: what sort of thin clients
[21:44] <hallyn> jacobjames: to host ftp and http you don't need the desktop.  Just go read the ubuntu server guide on setting up apache and vsftpd
[21:44] <hallyn> https://help.ubuntu.com/12.04/serverguide/
[21:45] <sarnold> jacobjames: _please_ look into sftp and see if it can meet your needs. clients are available for windows too, if that matters (putty, winscp, I think)
[21:45] <hallyn> sarnold: haha, good point
[21:45] <hallyn> ftp is still good for netboots at least :)
[21:45] <sarnold> hallyn: itym tftp? :)
[21:46] <pythonsnake> maybe he's gonna use his desktop like a desktop sarnold hallyn
[21:46] <dingo311> pythonsnake: honestly, not setup. this is a fresh install of server 12.04. i installed apache2, openssh, and a music steaming web interface. all of which i had on my desktop edition before i switched to server. the only firewall is the router. All of this has worked...few days ago same symptoms but a reboot fixed it. today, rebooted twice but no dice...
[21:46] <hallyn> pythonsnake: you mean lynx and w3m and mutt
[21:47] <hallyn> sarnold: i do
[21:47] <pythonsnake> hallyn: ?
[21:48] <pythonsnake> dingo311: hm
[21:48] <pythonsnake> dingo311: you pinged the ip?
[21:50] <hallyn> pythonsnake: 'desktop as a desktop' - nm
[21:50] <dingo311> pythonsnake: just tried to ping out from server, havent tried pinging the server
[21:50] <pythonsnake> hallyn: as in ubuntu server as desktop
[21:50] <hallyn> yes
[21:50] <sarnold> dingo311: many firewalls drop ICMP (despite most admins knowing better)
[21:52] <Chomps> what fw are you using or what router?
[21:52] <dingo311> sarnold: i think it is my ddns, pinging the ip went right through
[21:53] <pythonsnake> dingo311: there you go
[21:53] <dingo311> only firewall is router: dlink....dont flame me too bad, i know i need a firewall, is iptables a good place to start?
[21:53] <sarnold> dingo311: investigate 'ufw'
[21:53] <dingo311> pythonsnake: not sure how to resolve the ddns issue, but i will google around
[21:53] <sarnold> dingo311: it's a convenience wrapper around iptables. if it does what you need, it might save you a lot of time.
[21:54] <dingo311> sarnold: thanks. also, if you remember my ssh issue... i reformatted my phone and started everything fresh and got my keys working straight away
[21:55] <sarnold> dingo311: haha. man. that's too bad, it shouldn't have been that way, but I'm glad it's working. :)
[21:55] <jacobjames> THin clients the ones that allow people to get a desktop pushed out to a terminal. Any suggestions.
[21:55] <dingo311> sarnold: only people who use this are me, my wife, and a few close friends...would iptables work for that?
[21:56] <Chomps> I agree with sarnold many routers block ICMP by default. I personally never use them. I try to get a router that supports 'bridge mode' and then write my own firewall. iptables is are very powerful if used correctly.
[21:58] <dingo311> Chomps: only thing that has changed is from destop version to server, all hardware the same. could ICMP still be the culprit. only issue with desktop ever was overheating, never had anything unreachable
[21:59] <dingo311> i am not familiar with all the lingo, googled ICMP, looks intimidating.
[22:00] <dingo311> i dont think my router is blocking anything
[22:00] <Chomps> to start ubuntu server 'auto writes' firewall rules like ACL's to a temp file. I dont like it either. have you tried to flush the firewall rules on the server?
[22:01] <Chomps> check to see if there are any rules first "iptables -L"
[22:01] <dingo311> Chomps: no i have not tried flushing the rules, which i interpet as deleting
[22:01] <sarnold> jacobjames: look into this? https://help.ubuntu.com/12.10/ubuntu-help/sharing-remote-login.html
[22:01] <Chomps> then run: iptables -F
[22:01] <Chomps> iptables -X
[22:02] <Chomps> iptables -t nat -F
[22:02] <Chomps> iptables -t nat -X
[22:02] <Chomps> iptables -t mangle -F
[22:02] <Chomps> iptables -t mangle -X
[22:02] <Chomps> iptables -P INPUT ACCEPT
[22:02] <dingo311> all that, in that order i assume
[22:02] <Chomps> iptables -P FORWARD ACCEPT
[22:03] <Chomps> iptables -P OUTPUT ACCEPT
[22:03] <Chomps> yes in the above order
[22:04] <Chomps> that will allow all rules to be cleared and accept anything and output anything
[22:04] <dingo311>  iptables -L gives an error, ends with iptables or kernel needs to be upgraded
[22:04] <Chomps> are you running as root
[22:04] <Chomps> sudo su
[22:05] <dingo311> never, but these need to be run as root? that would make sense
[22:05] <Chomps> yes definatly
[22:06] <dingo311> iptables -L output http://paste.ubuntu.com/1567355/
[22:07] <Chomps> was that before or after you ran the above iptables commands
[22:08] <dingo311> efore
[22:08] <Chomps> well that looks like they are all flushed then
[22:08] <Chomps> I would run them anyway and then save the iptables
[22:09] <dingo311> cool
[22:09] <Chomps> "iptables-save"
[22:12] <dingo311> iptables -L looks the same, like you said it would.
[22:12] <Chomps> ICMP functions differently than other protocols - It is below the IP level in a technical sense. you can take a look at the before rules in /etc/ufw/before.rules
[22:13] <Chomps> check to see if the following exists (or similar): -A ufw-before-input -p icmp --icmp-type echo-request -j ACCEPT
[22:13] <dingo311> if i can access via local ip 192.168.x.x but not through ddns then that points to faulty ddns carrect
[22:14] <Chomps> could be or it could be the ISP Proxy server
[22:14] <dingo311> sudo iptables -A ....?
[22:15] <Chomps> no in the file /etc/ufw/before.rules
[22:15] <Chomps> not on command line
[22:16] <Chomps> try ping (from that server) to google or some site. ie: ping 8.8.8.8
[22:17] <Chomps> if you get a response then then ICMP out from that server is ok.
[22:17] <dingo311> yes i see the string in before.rules
[22:17] <dingo311> i dont think i will, hang on
[22:18] <dingo311> well it wasnt before when i tried but now success
[22:18] <Chomps> ok cool...so if I understand correctly you want to be able to ping from somewhere outside to your server?
[22:21] <Chomps> dingo311, would it be asking too much if you can give me the ddns name so that I can try ping it from outside?
[22:21] <Chomps> will give you the results
[22:21] <dingo311> correct. i cannot ping through the ddns
[22:21] <dingo311> the ddns is buffet.dlinkddns.com
[22:22] <Chomps> there is definitely an incoming (to you) block on ICMP
[22:23] <Chomps> I think it is either a setting on the router or your ISP
[22:23] <dingo311> you say that just from ping results? or did you look at some other info?
[22:24] <dingo311> so do i call my isp?
[22:24] <Chomps> just from ping results. I dont get any reply. I would ask your ISp if they are blocking it, yes
[22:26] <Chomps> bottom line: you can ping the server from your internal network which means your server is ok. If you are sure there is no setting on your router that blocks ICMP requests, then your ISP  or ddns is blocking it...its now that simple...ask them
[22:28] <dingo311> hmm, fair enough. although i thought they only block certin ports. i will double check my dlink router to make sure its not blocking requests then call. thanks very much for your help
[22:29] <Chomps> no prob. I hate ISP's that block things as a so called service...enjoy
[22:32] <dingo311> out of curiosity how would the isp know that i switched from desktop to server os? they couldnt would be my guess
[22:37] <Chomps> It shouldn't be of concern to them
[22:39] <Chomps> Just out of interest. On your router do you have "DNS AND DEFAULT GATEWAY" option
[22:41] <Chomps> I take it the ddns account info is on the router itself....if so make sure "Enable Firewall" has a check on it or ICMP wont work and also "Enable NAT"
[22:42] <dingo311> im begining to think it is striclty a ddns problem. ddns says status disconnected(obviously bad) looking at what router ip says it conflicts with whatismyip.com
[22:42] <dingo311> ddns is on the router. looking for the dns and default gateway
[22:43] <dingo311> i saved my router config before changing os and reloaded it. so all should be the same, should be
[22:44] <Chomps> oh well then you might have put in the incorrect account info in on the router, hee hee that would realy be a big issue. maybe just a typo on the router. the IP must be the same on ddns provider and your router
[22:46] <Chomps> dingo311, goto dlinkddns.com and log in...check the IP there. That must be the same as the IP provided by your ISP. if not, that would be problem no 1
[22:46] <dingo311> shouldn't the ddns host be updating that, that is what it is for
[22:47] <dingo311> never thought to really check all that since i never had a problem with it.
[22:47] <Chomps> your router updates that with the host. check that the ddns info on your router is correct and that it is updating dlinkddns.com correctly
[22:48] <Chomps> ok whatever you did now, it worked....
[22:48] <Chomps> I can ping your IP...well done...save the router config...
[22:49] <Chomps> 64 bytes from ip68-102-96-181.ks.ok.cox.net (68.102.96.181): icmp_req=2 ttl=104 time=337 ms
[22:50] <Chomps> dingo311, :)
[22:50] <dingo311> i got that too. must need a system or router restart because buffet.dlinkddns.com:4040 still times out
[22:50] <jacobjames> ok i am at the command prompt how do i get into my gui. I just donwloaded apt-get ubuntu-desktop
[22:51] <dingo311> ddns host had wrong ip in dns, thought that was their job
[22:51] <Chomps> ok but that is something different. 4040 is a port you are trying to get through on. you now need to forward that port on the router to the servers internal IP
[22:51] <Chomps> under poert forwarding
[22:51] <Chomps> port
[22:51] <dingo311> right, port forwarding is enabled, pointing to the correct ip
[22:53] <Chomps> Also I take it that there is a service on your server listening on port 4040 ?
[22:53] <dingo311> haha, let me make sure that is still up
[22:54] <Chomps> try "telnet localhost 4040" on the server that will tell you
[22:54] <jacobjames> got it.
[22:56] <Chomps> jacobjames, should be startx
[22:56] <jacobjames> yes waiting now. Thanks
[22:57] <Chomps> dingo311, is the service running ?
[22:58] <jacobjames> chomps ok just booted into a blank screen with background?
[22:59] <hallyn> ahs3: http://people.canonical.com/~serge/netcf_0.2.3 has the package, tests fine on raring
[23:02] <Chomps> jacobjames, did you just run apt-get install ubuntu-desktop  not xubuntu-desktop or anything else. because apt-get install ubuntu-desktop will install the gnome desktop
[23:02] <Guest85517> Chomps: system needed a reboot afet updating ddns, still not sure why they had ip wrong, but i wont forget to look there next time.
=== Guest85517 is now known as dingo311
[23:03] <Chomps> dingo311, cool
[23:04] <Chomps> dingo311, ok I can see your server is listening on that port...good stuff, have fun...
[23:05] <ahs3> hallyn: thx.  i'll take a look and upload to experimental if all is well
[23:05] <dingo311> in my dhcp client list there is an unknown ip with mac 00-00-00-00-00..... is this just a fluke?
[23:09] <Chomps> dingo311, that looks like and invalid ARP request
[23:09] <Chomps> dingo311, is that on the server, is your server the dhcp server
=== cpg|away is now known as cpg
[23:10] <dingo311> Chomps: not sure how to answer that, but i think so yes.
[23:12] <Chomps> dingo311, do you have a dhcp server service running on your server? Also if you have dhcp running on your router they could be conflicting and can cause an election on the network. (the one will try and force out the other)
[23:13] <sarnold> (dhcp has elections?)
[23:13] <Chomps> dingo311, only one dhcp server should be handing a single subnet...ie 192.168.x.y
[23:18] <dingo311> Chomps: not sure if dhcp server service is running on server. I will have to look into it later. got called to work. bah. thanks again for all your help. it means alot.
[23:19] <Chomps> cool, it is 1:20am here...going to catch a few zzZZ, cheers
[23:42] <axisys> failing to grow raid10 after replacing one of the 6 disks with a larger disk
[23:42] <axisys> # mdadm --grow /dev/md10 --size max
[23:42] <axisys> mdadm: raid10 array /dev/md10 cannot be reshaped.
[23:42] <axisys> what gives?
[23:56] <MraAlbertina> hi. what could be the problem of a machine connecting to the network but not to the net? besides all tests i did and comparing with this machine what can i do to check what's wrong with it? i have a feeling a simptom might be important: /etc/resolve.conf is empty. trying to insert manually 'nameserver 192.168.1.1' 'domain home' 'search home' doesn't solve because the changes would be lost on next reboot.
